"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5625],{77988:function(e,t,o){var n=o(33299);t.Z=e=>{var t;let{basePath:o="userUploads",folderPath:i,postfix:r}=e,{data:l}=(0,n.useSession)();r&&(i="".concat(i,"/").concat(r));let a="".concat(o,"/").concat(null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.username,"/").concat(i),s=async(e,t)=>{let o=encodeURIComponent(e.type),{fields:n,url:i,path:r}=await(await fetch("/api/upload?path=".concat(a).concat(t?"/".concat(t):"","&fileType=").concat(o))).json(),l=new FormData;Object.entries({...n,file:e}).forEach(e=>{let[t,o]=e;l.append(t,o)});let s=await fetch(i,{method:"POST",body:l});return{result:s,link:"".concat("https://patika-prod.s3-eu-central-1.amazonaws.com","/").concat(r)}};return[s]}},85625:function(e,t,o){o.d(t,{Z:function(){return tu}});var n=o(85893),i=o(87632),r=o(91058),l=o(6898),a=o(67846),s=o(77943),c=o.n(s),d=o(86146),u=o(71954),h=o(4506),g=o(22292),m=o(69421),p=o(38957),x=o(2903),f=o(23277),_=o(73435),b=o(87592),C=o(44783),N=o(84260),y=o(67294),j=o(32998),w=o(89408),v=o(76969),k=o(73935),A=o(49598),S=o(46887),M=o(93906),E=o(204),O=o(88911),T=o(36953),R=o(66303),D=o(96272),L=o(47523),I=o(89154),$=o(12795),P=o(42290),z=o(53217),F=o(84031),B=o(40949),H=o(66960),Z=o(75976),G=o(27803),W=o(81357),U=o(6598),Y=o(73041),q=o(71787),K=o(67884),J=o(92560),V=o(8719),X=o(2546),Q=o(40726),ee=o(80433),et=o(60693),eo=o(23145),en=o(27784),ei=o(96375),er=o(45339),el=o(5233);let ea=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],document.getElementById("previewIframe").contentWindow.print()},es=e=>{let t=document.getElementById("previewIframe"),o=t.document;t.contentDocument?o=t.contentDocument:t.contentWindow&&(o=t.contentWindow.document),o&&(o.open(),o.writeln(e),o.close())};var ec=o(13025);let ed=e=>(0,n.jsx)("iframe",{...e,style:{position:"fixed",top:0,left:0,opacity:0,zIndex:-1}});var eu=()=>{let[e]=(0,N.useLexicalComposerContext)(),[t,o]=(0,y.useState)(!1),{t:i}=(0,el.$G)("common");return(0,y.useEffect)(()=>{t&&e.update(()=>{let t=(0,b.$generateHtmlFromNodes)(e,null);es(t);let n=document.head,i=n.cloneNode(!0),r=document.getElementById("previewIframe").contentWindow.document.head,l=document.createElement("style");l.textContent="body { background: initial }",r.append(i),r.append(l),ea(),o(!1)})},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.u,{label:i("editor.download"),fontSize:"xs",openDelay:"1000",children:(0,n.jsx)(I.h,{variant:"ghost",color:"text.color",_disabled:{cursor:"not-allowed",opacity:.4},icon:(0,n.jsx)(ec.Z,{size:"16"}),onClick:()=>{o(!0)},"aria-label":i("editor.download")})}),t&&(0,n.jsx)(ed,{id:"previewIframe"})]})},eh=o(23279),eg=o.n(eh),em=o(28129),ep=o(38583),ex=e=>{let{onChange:t,color:o,icon:i,label:r}=e,l=(0,y.useRef)(null),a=i||ep.Z;return(0,y.useEffect)(()=>{l.current&&(l.current.value=o)},[o]),(0,n.jsx)(L.u,{label:r,fontSize:"xs",openDelay:"1000",children:(0,n.jsxs)(E.k,{position:"relative",children:[(0,n.jsx)(em.I,{ref:l,defaultValue:o,cursor:"pointer",type:"color",height:"100%",width:"100%",position:"absolute",top:"0",left:"0",opacity:"0",onChange:t}),(0,n.jsx)(I.h,{variant:"ghost",color:"text.color",_disabled:{cursor:"not-allowed",opacity:.4},onClick:()=>{l.current.click()},icon:(0,n.jsx)(a,{size:16}),"aria-label":"Color Picker"})]})})};let ef=e=>{var t=e.toString(16);return 1==t.length?"0"+t:t},e_=e=>{var t=[];return e.replace(/[\d+\.]+/g,function(e){t.push(parseFloat(e))}),{hex:"#"+t.slice(0,3).map(ef).join(""),opacity:4==t.length?t[3]:1}};var eb=o(70433);let eC=new Set(["paragraph","quote","code","h1","h2","ul","ol"]),eN={code:"Code Block",h1:"Large Heading",h2:"Small Heading",h3:"Heading",h4:"Heading",h5:"Heading",ol:"Numbered List",paragraph:"Normal",quote:"Quote",ul:"Bulleted List"},ey=[["Arial","Arial"],["Courier New","Courier New"],["Georgia","Georgia"],["Times New Roman","Times New Roman"],["Trebuchet MS","Trebuchet MS"],["Verdana","Verdana"]],ej=[["10px","10px"],["11px","11px"],["12px","12px"],["13px","13px"],["14px","14px"],["15px","15px"],["16px","16px"],["17px","17px"],["18px","18px"],["19px","19px"],["20px","20px"]],ew={code:$.Z,h1:P.Z,h2:z.Z,ol:F.Z,paragraph:B.Z,quote:H.Z,ul:Z.Z},ev=()=>(0,n.jsx)("div",{className:"divider"});function ek(e,t){null===t?(e.style.opacity="0",e.style.top="-1000px",e.style.left="-1000px"):(e.style.opacity="1",e.style.top="".concat(t.top+t.height+window.pageYOffset+10,"px"),e.style.left="".concat(t.left+window.pageXOffset-e.offsetWidth/2+t.width/2,"px"))}let eA=e=>{let{editor:t}=e,o=(0,y.useRef)(null),i=(0,y.useRef)(null),r=(0,y.useRef)(!1),[l,a]=(0,y.useState)(""),[s,c]=(0,y.useState)(!1),[d,u]=(0,y.useState)(null),h=(0,y.useCallback)(()=>{let e=(0,j.$getSelection)();if((0,j.$isRangeSelection)(e)){let t=eS(e),o=t.getParent();(0,_.$isLinkNode)(o)?a(o.getURL()):(0,_.$isLinkNode)(t)?a(t.getURL()):a("")}let n=o.current,i=window.getSelection(),l=document.activeElement;if(null===n)return;let s=t.getRootElement();if(null!==e&&!i.isCollapsed&&null!==s&&s.contains(i.anchorNode)){let t;let o=i.getRangeAt(0);if(i.anchorNode===s){let e=s;for(;null!=e.firstElementChild;)e=e.firstElementChild;t=e.getBoundingClientRect()}else t=o.getBoundingClientRect();r.current||ek(n,t),u(e)}else l&&"link-input"===l.className||(ek(n,null),u(null),c(!1),a(""));return!0},[t]);return(0,y.useEffect)(()=>(0,v.mergeRegister)(t.registerUpdateListener(e=>{let{editorState:t}=e;t.read(()=>{h()})}),t.registerCommand(j.SELECTION_CHANGE_COMMAND,()=>(h(),!0),1)),[t,h]),(0,y.useEffect)(()=>{t.getEditorState().read(()=>{h()})},[t,h]),(0,y.useEffect)(()=>{s&&i.current&&i.current.focus()},[s]),(0,n.jsx)("div",{ref:o,className:"link-editor",children:s?(0,n.jsx)("input",{ref:i,className:"link-input",value:l,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),null!==d&&(""!==l&&t.dispatchCommand(_.TOGGLE_LINK_COMMAND,l),c(!1))):"Escape"===e.key&&(e.preventDefault(),c(!1))}}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"link-input",children:[(0,n.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:l}),(0,n.jsx)("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:e=>e.preventDefault(),"aria-hidden":"true",onClick:()=>{c(!0)}})]})})})};function eS(e){let t=e.anchor,o=e.focus,n=e.anchor.getNode(),i=e.focus.getNode();if(n===i)return n;let r=e.isBackward();return r?(0,w.$isAtNodeEnd)(o)?n:i:(0,w.$isAtNodeEnd)(t)?i:n}let eM=e=>{let{editor:t,blockType:o,passRef:i}=e,r=[{value:"paragraph",onClick:()=>{"paragraph"!==o&&t.update(()=>{let e=(0,j.$getSelection)();(0,j.$isRangeSelection)(e)&&(0,w.$wrapNodes)(e,()=>(0,j.$createParagraphNode)())})}},{value:"h1",onClick:()=>{"h1"!==o&&t.update(()=>{let e=(0,j.$getSelection)();(0,j.$isRangeSelection)(e)&&(0,w.$wrapNodes)(e,()=>(0,x.$createHeadingNode)("h1"))})}},{value:"h2",onClick:()=>{"h2"!==o&&t.update(()=>{let e=(0,j.$getSelection)();(0,j.$isRangeSelection)(e)&&(0,w.$wrapNodes)(e,()=>(0,x.$createHeadingNode)("h2"))})}},{value:"ul",onClick:()=>{"ul"!==o?t.dispatchCommand(C.INSERT_UNORDERED_LIST_COMMAND):t.dispatchCommand(C.REMOVE_LIST_COMMAND)}},{value:"ol",onClick:()=>{"ol"!==o?t.dispatchCommand(C.INSERT_ORDERED_LIST_COMMAND):t.dispatchCommand(C.REMOVE_LIST_COMMAND)}},{value:"quote",onClick:()=>{"quote"!==o&&t.update(()=>{let e=(0,j.$getSelection)();(0,j.$isRangeSelection)(e)&&(0,w.$wrapNodes)(e,()=>(0,x.$createQuoteNode)())})}},{value:"code",onClick:()=>{"code"!==o&&t.update(()=>{let e=(0,j.$getSelection)();(0,j.$isRangeSelection)(e)&&(0,w.$wrapNodes)(e,()=>(0,f.$createCodeNode)())})}}];return(0,n.jsx)(A.h,{containerRef:i,children:(0,n.jsx)(S.q,{children:r.map(e=>{let{value:t,onClick:i}=e,r=ew[t],l=eN[t];return(0,n.jsx)(M.s,{color:"text.color",onClick:i,...o===t&&{bg:"dashboard.list.hover.bg"},children:(0,n.jsxs)(E.k,{gap:"2",alignItems:"center",fontSize:"sm",children:[(0,n.jsx)(r,{size:16}),(0,n.jsx)(O.x,{children:l})]})},l)})})})},eE=e=>{let{editor:t,value:o,style:i,passRef:r}=e,l=(0,y.useCallback)(e=>{t.update(()=>{let t=(0,j.$getSelection)();(0,j.$isRangeSelection)(t)&&(0,w.$patchStyleText)(t,{[i]:e})})},[t,i]),a="font-family"===i?"Formatting options for font family":"Formatting options for font size";return(0,n.jsxs)(T.v,{children:[(0,n.jsx)(R.j,{as:D.z,variant:"ghost",color:"text.color",rightIcon:(0,n.jsx)(er.v,{}),"aria-label":a,minW:"auto",children:(0,n.jsx)(E.k,{gap:"2",alignItems:"center",fontSize:"sm",children:(0,n.jsxs)(O.x,{textTransform:"capitalize",children:[" ",o]})})}),(0,n.jsx)(A.h,{containerRef:r,children:(0,n.jsx)(S.q,{maxH:"300px",overflow:"auto",children:("font-family"===i?ey:ej).map(e=>{let[t,i]=e;return(0,n.jsx)(M.s,{color:"text.color",onClick:()=>{l(t)},...t===o&&{bg:"dashboard.list.hover.bg"},children:(0,n.jsx)(E.k,{gap:"2",alignItems:"center",fontSize:"sm",children:(0,n.jsx)(O.x,{textTransform:"capitalize",children:i})})},t)})})})]})};var eO=e=>{let{showImageModal:t,showYoutubeModal:o,isImageUpload:i,passRef:r}=e,[l]=(0,N.useLexicalComposerContext)(),[a,s]=(0,y.useState)(!1),[c,d]=(0,y.useState)(!1),[u,h]=(0,y.useState)("paragraph"),[g,m]=(0,y.useState)(null),[p,b]=(0,y.useState)(""),[P,z]=(0,y.useState)(!1),[F,B]=(0,y.useState)(!1),[H,Z]=(0,y.useState)(!1),[ea,es]=(0,y.useState)(!1),[ec,ed]=(0,y.useState)(!1),[eh,em]=(0,y.useState)(!1),[ep,ef]=(0,y.useState)("Arial"),[ey,ej]=(0,y.useState)("14px"),[ek,eO]=(0,y.useState)(""),[eT,eR]=(0,y.useState)(""),{t:eD}=(0,el.$G)(),eL=(0,y.useCallback)(()=>{let e=(0,j.$getSelection)();if((0,j.$isRangeSelection)(e)){let t=e.anchor.getNode(),o="root"===t.getKey()?t:t.getTopLevelElementOrThrow(),n=o.getKey(),i=l.getElementByKey(n);if(null!==i){if(m(n),(0,C.$isListNode)(o)){let e=(0,v.$getNearestNodeOfType)(t,C.ListNode),n=e?e.getTag():o.getTag();h(n)}else{let e=(0,x.$isHeadingNode)(o)?o.getTag():o.getType();h(e),(0,f.$isCodeNode)(o)&&b(o.getLanguage()||(0,f.getDefaultCodeLanguage)())}}ef((0,w.$getSelectionStyleValueForProperty)(e,"font-family","Arial")),ej((0,w.$getSelectionStyleValueForProperty)(e,"font-size","15px")),B(e.hasFormat("bold")),Z(e.hasFormat("italic")),es(e.hasFormat("underline")),ed(e.hasFormat("strikethrough")),em(e.hasFormat("code"));let r=eS(e),a=r.getParent();(0,_.$isLinkNode)(a)||(0,_.$isLinkNode)(r)?z(!0):z(!1)}let t={};try{var o,n;t=null===(n=JSON)||void 0===n?void 0:null===(o=n.parse)||void 0===o?void 0:o.call(n,"{".concat((null==e?void 0:e.style)||"","}").replace(/(\w*:)/g,'$1"').replace(/[;]/g,'";').replace(/(\'{2,})/g,'"').replace(/;/g,",").replace(/(['"])?([a-zA-Z0-9_-]+)(['"])?:/g,'"$2": ').replace(/,\s*\}/,"}").trim())}catch(e){console.error(e)}t["background-color"]&&eO(e_(t["background-color"]).hex),t.color&&eR(e_(t.color).hex)},[l]);(0,y.useEffect)(()=>(0,v.mergeRegister)(l.registerUpdateListener(e=>{let{editorState:t}=e;t.read(()=>{eL()})}),l.registerCommand(j.SELECTION_CHANGE_COMMAND,e=>(eL(),!1),1),l.registerCommand(j.CAN_UNDO_COMMAND,e=>(s(e),!1),1),l.registerCommand(j.CAN_REDO_COMMAND,e=>(d(e),!1),1)),[l,eL]);let eI=(0,y.useMemo)(()=>(0,f.getCodeLanguages)(),[]),e$=(0,y.useCallback)(e=>{l.update(()=>{if(null!==g){let t=(0,j.$getNodeByKey)(g);(0,f.$isCodeNode)(t)&&t.setLanguage(e.target.value)}})},[l,g]),eP=(0,y.useCallback)(()=>{P?l.dispatchCommand(_.TOGGLE_LINK_COMMAND,null):l.dispatchCommand(_.TOGGLE_LINK_COMMAND,"https://")},[l,P]),ez=ew[u],eF=(0,y.useCallback)(e=>{l.update(()=>{let t=(0,j.$getSelection)();(0,j.$isRangeSelection)(t)&&(0,w.$patchStyleText)(t,e)})},[l]),eB=(0,y.useCallback)(e=>{eF({color:e})},[eF]),eH=(0,y.useCallback)(e=>{eF({"background-color":e})},[eF]),eZ=eg()(e=>{eH(e.target.value)},300),eG=eg()(e=>{eB(e.target.value)},300),eW={formatText:[{icon:(0,n.jsx)(G.Z,{size:16}),onClick:()=>{l.dispatchCommand(j.FORMAT_TEXT_COMMAND,"bold")},arialLabel:"Bold",label:"editor.bold",isActive:F},{icon:(0,n.jsx)(W.Z,{size:16}),onClick:()=>{l.dispatchCommand(j.FORMAT_TEXT_COMMAND,"italic")},arialLabel:"Italic",label:"editor.italic",isActive:H},{icon:(0,n.jsx)(U.Z,{size:16}),onClick:()=>{l.dispatchCommand(j.FORMAT_TEXT_COMMAND,"underline")},arialLabel:"Underline",label:"editor.underline",isActive:ea},{icon:(0,n.jsx)(Y.Z,{size:16}),onClick:()=>{l.dispatchCommand(j.FORMAT_TEXT_COMMAND,"strikethrough")},arialLabel:"Strikethrough",label:"editor.strikethrough",isActive:ec},{icon:(0,n.jsx)($.Z,{size:16}),onClick:()=>{l.dispatchCommand(j.FORMAT_TEXT_COMMAND,"code")},arialLabel:"Code",label:"editor.code",isActive:eh},{icon:(0,n.jsx)(q.Z,{size:16}),onClick:eP,arialLabel:"Link",label:"editor.link",isActive:P}],formatBlock:[{icon:(0,n.jsx)(K.Z,{size:16}),onClick:()=>{l.update(()=>{let e=(0,j.$getSelection)();(0,eb.dP)(e.getNodes()[0])&&e.getNodes()[0].setParentAlignment("left")}),l.dispatchCommand(j.FORMAT_ELEMENT_COMMAND,"left")},arialLabel:"Align Left",label:"editor.alignLeft"},{icon:(0,n.jsx)(J.Z,{size:16}),onClick:()=>{l.update(()=>{let e=(0,j.$getSelection)();(0,eb.dP)(e.getNodes()[0])&&e.getNodes()[0].setParentAlignment("center")}),l.dispatchCommand(j.FORMAT_ELEMENT_COMMAND,"center")},arialLabel:"Align Center",label:"editor.alignLeft"},{icon:(0,n.jsx)(V.Z,{size:16}),onClick:()=>{l.update(()=>{let e=(0,j.$getSelection)();(0,eb.dP)(e.getNodes()[0])&&e.getNodes()[0].setParentAlignment("right")}),l.dispatchCommand(j.FORMAT_ELEMENT_COMMAND,"right")},arialLabel:"Align Right",label:"editor.alignRight"},{icon:(0,n.jsx)(X.Z,{size:16}),onClick:()=>{l.dispatchCommand(j.FORMAT_ELEMENT_COMMAND,"justify")},arialLabel:"Align Justify",label:"editor.alignJustify"}],embed:[{icon:(0,n.jsx)(Q.Z,{size:16}),onClick:()=>{o()},arialLabel:"Embed Youtube",label:"editor.embedYoutube"}],image:i?[{icon:(0,n.jsx)(ee.Z,{size:16}),onClick:()=>{t()},arialLabel:"Insert Image",label:"editor.insertImage"}]:[]};return(0,n.jsx)(E.k,{className:"toolbar",overflow:"auto",justifyContent:"space-between",children:(0,n.jsxs)(E.k,{children:[(0,n.jsx)(L.u,{label:eD("editor.undo"),fontSize:"xs",openDelay:"1000",children:(0,n.jsx)(I.h,{variant:"ghost",color:"text.color",icon:(0,n.jsx)(et.Z,{size:16}),disabled:!a,onClick:()=>{l.dispatchCommand(j.UNDO_COMMAND)},"aria-label":"Undo"})}),(0,n.jsx)(L.u,{label:eD("editor.redo"),fontSize:"xs",openDelay:"1000",children:(0,n.jsx)(I.h,{variant:"ghost",color:"text.color",_disabled:{cursor:"not-allowed",opacity:.4},icon:(0,n.jsx)(eo.Z,{size:16}),isDisabled:!c,onClick:()=>{l.dispatchCommand(j.REDO_COMMAND)},"aria-label":"Redo"})}),(0,n.jsx)(ev,{}),eC.has(u)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(T.v,{children:[(0,n.jsx)(R.j,{as:D.z,variant:"ghost",color:"text.color",rightIcon:(0,n.jsx)(er.v,{}),minW:"auto",children:(0,n.jsxs)(E.k,{gap:"2",alignItems:"center",fontSize:"sm",children:[(0,n.jsx)(ez,{size:16}),(0,n.jsxs)(O.x,{children:[" ",eN[u]]})]})}),(0,n.jsx)(eM,{editor:l,blockType:u,passRef:r})]}),(0,n.jsx)(ev,{})]}),"code"===u?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(T.v,{children:[(0,n.jsx)(R.j,{as:D.z,variant:"ghost",color:"text.color",rightIcon:(0,n.jsx)(er.v,{}),minW:"auto",children:(0,n.jsx)(E.k,{gap:"2",alignItems:"center",fontSize:"sm",children:(0,n.jsxs)(O.x,{textTransform:"capitalize",children:[" ",p]})})}),(0,n.jsx)(A.h,{containerRef:r,children:(0,n.jsx)(S.q,{maxH:"300px",overflow:"auto",children:eI.map(e=>(0,n.jsx)(M.s,{color:"text.color",onClick:()=>{e$({target:{value:e}})},...p===e&&{bg:"dashboard.list.hover.bg"},children:(0,n.jsx)(E.k,{gap:"2",alignItems:"center",fontSize:"sm",children:(0,n.jsx)(O.x,{textTransform:"capitalize",children:e})})},e))})})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eE,{passRef:r,style:"font-family",value:ep,editor:l}),(0,n.jsx)(eE,{passRef:r,style:"font-size",value:ey,editor:l}),(0,n.jsx)(ev,{}),(0,n.jsxs)(n.Fragment,{children:[eW.formatText.map(e=>(0,n.jsx)(L.u,{label:eD(e.label),fontSize:"xs",openDelay:"1000",children:(0,n.jsx)(I.h,{variant:"ghost",color:"text.color",_disabled:{cursor:"not-allowed",opacity:.4},icon:e.icon,isActive:e.isActive,onClick:e.onClick,"aria-label":e.arialLabel})},e.arialLabel)),(0,n.jsx)(ex,{onChange:eG,icon:en.Z,label:"Text Color",color:eT}),(0,n.jsx)(ex,{onChange:eZ,icon:ei.Z,label:"Background Color",color:ek})]}),P&&(0,k.createPortal)((0,n.jsx)(eA,{editor:l}),document.body),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ev,{}),[...eW.formatBlock].map(e=>(0,n.jsx)(L.u,{label:eD(e.label),fontSize:"xs",openDelay:"1000",children:(0,n.jsx)(I.h,{variant:"ghost",color:"text.color",_disabled:{cursor:"not-allowed",opacity:.4},icon:e.icon,onClick:e.onClick,"aria-label":e.arialLabel})},e.arialLabel)),(0,n.jsx)(ev,{}),[...eW.image,...eW.embed].map(e=>(0,n.jsx)(L.u,{label:eD(e.label),fontSize:"xs",openDelay:"1000",children:(0,n.jsx)(I.h,{variant:"ghost",color:"text.color",_disabled:{cursor:"not-allowed",opacity:.4},icon:e.icon,onClick:e.onClick,"aria-label":e.arialLabel})},e.arialLabel)),(0,n.jsx)(eu,{})]})]})]})})},eT=o(36571),eR=o(7335),eD=o(23100),eL=o(87536),eI=o(5152),e$=o.n(eI),eP=e=>{let{maxDepth:t}=e,[o]=(0,N.useLexicalComposerContext)();return(0,y.useEffect)(()=>o.registerCommand(j.INDENT_CONTENT_COMMAND,()=>!function(e){let t=(0,j.$getSelection)();if(!(0,j.$isRangeSelection)(t))return!1;let o=function(e){let t=e.getNodes();return new Set(0===t.length?[e.anchor.getNode().getParentOrThrow(),e.focus.getNode().getParentOrThrow()]:t.map(e=>(0,j.$isElementNode)(e)?e:e.getParentOrThrow()))}(t),n=0;for(let e of o)if((0,C.$isListNode)(e))n=Math.max((0,C.$getListDepth)(e)+1,n);else if((0,C.$isListItemNode)(e)){let t=e.getParent();if(!(0,C.$isListNode)(t))throw Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");n=Math.max((0,C.$getListDepth)(t)+1,n)}return n<=e}(null!=t?t:7),j.COMMAND_PRIORITY_HIGH),[o,t]),null};function ez(e){return e instanceof HTMLElement}class eF{get x(){return this._x}get y(){return this._y}equals(e){let{x:t,y:o}=e;return this.x===t&&this.y===o}calcDeltaXTo(e){let{x:t}=e;return this.x-t}calcDeltaYTo(e){let{y:t}=e;return this.y-t}calcHorizontalDistanceTo(e){return Math.abs(this.calcDeltaXTo(e))}calcVerticalDistance(e){return Math.abs(this.calcDeltaYTo(e))}calcDistanceTo(e){return Math.sqrt(Math.pow(this.calcDeltaXTo(e),2)+Math.pow(this.calcDeltaYTo(e),2))}constructor(e,t){this._x=e,this._y=t}}class eB{get top(){return this._top}get right(){return this._right}get bottom(){return this._bottom}get left(){return this._left}get width(){return Math.abs(this._left-this._right)}get height(){return Math.abs(this._bottom-this._top)}equals(e){let{top:t,left:o,bottom:n,right:i}=e;return t===this._top&&n===this._bottom&&o===this._left&&i===this._right}contains(e){if(e instanceof eF){let{x:t,y:o}=e,n=o<this._top,i=o>this._bottom,r=t<this._left,l=t>this._right;return{reason:{isOnBottomSide:i,isOnLeftSide:r,isOnRightSide:l,isOnTopSide:n},result:!n&&!i&&!r&&!l}}{let{top:t,left:o,bottom:n,right:i}=e;return t>=this._top&&t<=this._bottom&&n>=this._top&&n<=this._bottom&&o>=this._left&&o<=this._right&&i>=this._left&&i<=this._right}}intersectsWith(e){let{left:t,top:o,width:n,height:i}=e,{left:r,top:l,width:a,height:s}=this;return(t+n>=r+a?t+n:r+a)-(t<=r?t:r)<=n+a&&(o+i>=l+s?o+i:l+s)-(o<=l?o:l)<=i+s}generateNewRect(e){let{left:t=this.left,top:o=this.top,right:n=this.right,bottom:i=this.bottom}=e;return new eB(t,o,n,i)}static fromLTRB(e,t,o,n){return new eB(e,t,o,n)}static fromLWTH(e,t,o,n){return new eB(e,o,e+t,o+n)}static fromPoints(e,t){let{y:o,x:n}=e,{y:i,x:r}=t;return eB.fromLTRB(n,o,r,i)}static fromDOM(e){let{top:t,width:o,left:n,height:i}=e.getBoundingClientRect();return eB.fromLWTH(n,o,t,i)}constructor(e,t,o,n){let[i,r]=t<=n?[t,n]:[n,t],[l,a]=e<=o?[e,o]:[o,e];this._top=i,this._right=a,this._left=l,this._bottom=r}}let eH="application/x-lexical-drag-block",eZ=1/0;function eG(e,t,o){let n=e.getBoundingClientRect(),i=t.getEditorState().read(()=>(0,j.$getRoot)().getChildrenKeys()),r=null;return t.getEditorState().read(()=>{var e;let l=0===(e=i.length)?1/0:eZ>=0&&eZ<e?eZ:Math.floor(e/2),a=0;for(;l>=0&&l<i.length;){let e=i[l],s=t.getElementByKey(e);if(null===s)break;let c=new eF(o.x,o.y),d=eB.fromDOM(s),{marginTop:u,marginBottom:h}=window.getComputedStyle(s),g=d.generateNewRect({bottom:d.bottom+parseFloat(h),left:n.left,right:n.right,top:d.top-parseFloat(u)}),{result:m,reason:{isOnTopSide:p,isOnBottomSide:x}}=g.contains(c);if(m){r=s,eZ=l;break}0===a&&(a=p?-1:x?1:1/0),l+=a}}),r}var eW=e=>{let{anchorElem:t=document.body}=e,[o]=(0,N.useLexicalComposerContext)();return function(e,t,o){let i=t.parentElement,r=(0,y.useRef)(null),l=(0,y.useRef)(null),[a,s]=(0,y.useState)(null);return(0,y.useEffect)(()=>{function o(o){let n=o.target;if(!ez(n)){s(null);return}if(n.closest(".".concat("draggable-block-menu")))return;let i=eG(t,e,o);s(i)}function n(){s(null)}return null==i||i.addEventListener("mousemove",o),null==i||i.addEventListener("mouseleave",n),()=>{null==i||i.removeEventListener("mousemove",o),null==i||i.removeEventListener("mouseleave",n)}},[i,t,e]),(0,y.useEffect)(()=>{r.current&&function(e,t,o){if(!e){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}let n=e.getBoundingClientRect(),i=window.getComputedStyle(e),r=t.getBoundingClientRect(),l=o.getBoundingClientRect(),a=n.top+(parseInt(i.lineHeight,10)-r.height)/2-l.top;t.style.opacity="1",t.style.transform="translate(".concat(4,"px, ").concat(a,"px)")}(a,r.current,t)},[t,a]),(0,y.useEffect)(()=>(0,v.mergeRegister)(e.registerCommand(j.DRAGOVER_COMMAND,o=>(function(o){let[n]=(0,x.eventFiles)(o);if(n)return!1;let{pageY:i,target:r}=o;if(!ez(r))return!1;let a=eG(t,e,o),s=l.current;return null!==a&&null!==s&&(function(e,t,o,n){let i=window.getComputedStyle(t),{top:r,height:l}=t.getBoundingClientRect(),{top:a,width:s}=n.getBoundingClientRect(),c=r;o-r>l/2?c+=l+parseFloat(i.marginBottom):c-=parseFloat(i.marginTop);let d=c-a-2;e.style.transform="translate(".concat(24,"px, ").concat(d,"px)"),e.style.width="".concat(s-48,"px"),e.style.opacity=".4"}(s,a,i,t),o.preventDefault(),!0)})(o),j.COMMAND_PRIORITY_LOW),e.registerCommand(j.DROP_COMMAND,o=>(function(o){let[n]=(0,x.eventFiles)(o);if(n)return!1;let{target:i,dataTransfer:r,pageY:l}=o,a=(null==r?void 0:r.getData(eH))||"",c=(0,j.$getNodeByKey)(a);if(!c||!ez(i))return!1;let d=eG(t,e,o);if(!d)return!1;let u=(0,j.$getNearestNodeFromDOMNode)(d);if(!u)return!1;if(u===c)return!0;let{top:h,height:g}=d.getBoundingClientRect();return l-h>g/2?u.insertAfter(c):u.insertBefore(c),s(null),!0})(o),j.COMMAND_PRIORITY_HIGH)),[t,e]),(0,k.createPortal)((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"icon draggable-block-menu",ref:r,draggable:!0,onDragStart:function(t){let o=t.dataTransfer;if(!o||!a)return;!function(e,t){let{transform:o}=t.style;t.style.transform="translateZ(0)",e.setDragImage(t,0,0),setTimeout(()=>{t.style.transform=o})}(o,a);let n="";e.update(()=>{let e=(0,j.$getNearestNodeFromDOMNode)(a);e&&(n=e.getKey())}),o.setData(eH,n)},onDragEnd:function(){var e;(e=l.current)&&(e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)")},children:(0,n.jsx)("div",{className:o?"icon":""})}),(0,n.jsx)("div",{className:"draggable-block-target-line",ref:l})]}),t)}(o,t,o._editable)},eU=()=>{let[e]=(0,N.useLexicalComposerContext)();return(0,y.useEffect)(()=>(0,f.registerCodeHighlighting)(e),[e]),null},eY=o(22155),eq=o(32358);let eK=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,eJ=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,eV=[e=>{let t=eK.exec(e);return t&&{index:t.index,length:t[0].length,text:t[0],url:t[0]}},e=>{let t=eJ.exec(e);return t&&{index:t.index,length:t[0].length,text:t[0],url:"mailto:".concat(t[0])}}];var eX=()=>(0,n.jsx)(eq.AutoLinkPlugin,{matchers:eV}),eQ=e=>{let{htmlString:t,jsonContent:o,textHtmlMimeType:n="text/html"}=e,[i]=(0,N.useLexicalComposerContext)();(0,y.useEffect)(()=>{i.update(()=>{i.update(()=>{if(!t&&!o){let e=(0,j.$getRoot)();return e.clear()}if(o){let e=i.parseEditorState(o);return i.setEditorState(e)}if(t){let e=new DOMParser,o=e.parseFromString(t,"text/html"),n=(0,b.$generateNodesFromDOM)(i,o);(0,j.$getRoot)().select();let r=(0,j.$getRoot)();return r.clear(),(0,j.$insertNodes)(n)}})})},[i,t,n])},e0={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough",code:"editor-text-code"},code:"editor-code",codeHighlight:{atrule:"editor-tokenAttr",attr:"editor-tokenAttr",boolean:"editor-tokenProperty",builtin:"editor-tokenSelector",cdata:"editor-tokenComment",char:"editor-tokenSelector",class:"editor-tokenFunction","class-name":"editor-tokenFunction",comment:"editor-tokenComment",constant:"editor-tokenProperty",deleted:"editor-tokenProperty",doctype:"editor-tokenComment",entity:"editor-tokenOperator",function:"editor-tokenFunction",important:"editor-tokenVariable",inserted:"editor-tokenSelector",keyword:"editor-tokenAttr",namespace:"editor-tokenVariable",number:"editor-tokenProperty",operator:"editor-tokenOperator",prolog:"editor-tokenComment",property:"editor-tokenProperty",punctuation:"editor-tokenPunctuation",regex:"editor-tokenVariable",selector:"editor-tokenSelector",string:"editor-tokenSelector",symbol:"editor-tokenProperty",tag:"editor-tokenProperty",url:"editor-tokenOperator",variable:"editor-tokenVariable"}},e1=o(11709),e2=o(48082);let e3=e=>{let{className:t,format:o,nodeKey:i,videoID:r}=e;return(0,n.jsx)(e1.BlockWithAlignableContents,{className:t,format:o,nodeKey:i,children:(0,n.jsx)("iframe",{width:"560",height:"315",style:{display:"inline-block"},src:"https://www.youtube-nocookie.com/embed/".concat(r),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video"})})};function e6(e){let t=e.getAttribute("data-lexical-youtube");if(t){let e=new e8(t);return{node:e}}return null}class e8 extends e2.DecoratorBlockNode{static getType(){return"youtube"}static clone(e){return new e8(e.__id,e.__format,e.__key)}static importJSON(e){var t;let o=(t=e.videoID,new e8(t));return o.setFormat(e.format),o}exportJSON(){return{...super.exportJSON(),type:"youtube",version:1,videoID:this.__id}}exportDOM(){let e=document.createElement("iframe");return e.setAttribute("data-lexical-youtube",this.__id),e.setAttribute("width","560"),e.setAttribute("height","315"),e.setAttribute("src","https://www.youtube-nocookie.com/embed/".concat(this.__id)),e.setAttribute("frameborder","0"),e.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),e.setAttribute("allowfullscreen","true"),e.setAttribute("title","YouTube video"),{element:e}}static importDOM(){return{iframe:e=>e.hasAttribute("data-lexical-youtube")?{conversion:e6,priority:1}:null}}updateDOM(){return!1}getId(){return this.__id}getTextContent(e,t){return"https://www.youtube.com/watch?v=".concat(this.__id)}decorate(e,t){let o=t.theme.embedBlock||{},i={base:o.base||"",focus:o.focus||""};return(0,n.jsx)(e3,{className:i,format:this.__format,nodeKey:this.getKey(),videoID:this.__id})}isInline(){return!1}constructor(e,t,o){super(t,o),this.__id=e}}var e9=o(98353),e5=o(65291),e4=o(77374),e7=o(10191),te=o(23438),tt=o(56880),to=o(70654),tn=o(57386);let ti=(0,j.createCommand)("INSERT_YOUTUBE_COMMAND"),tr=async e=>{let t=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/.exec(e),o=t&&(null==t?void 0:t[2].length)===11?t[2]:null;return null!=o&&{id:o,url:e}};function tl(e){let{isOpen:t,onClose:o}=e,[i]=(0,N.useLexicalComposerContext)(),{register:r,handleSubmit:l,formState:{errors:a}}=(0,eL.cI)();(0,y.useEffect)(()=>{if(!i.hasNodes([e8]))throw Error("YouTubePlugin: YouTubeNode not registered on editor");return i.registerCommand(ti,e=>{let t=new e8(e);return(0,v.$insertNodeToNearestRoot)(t),!0},j.COMMAND_PRIORITY_EDITOR)},[i]);let s=async e=>{let{id:t}=await tr(e.youtubeUrl);i.dispatchCommand(ti,t),o()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(e9.u_,{isOpen:t,onClose:o,isCentered:!0,children:[(0,n.jsx)(e5.Z,{}),(0,n.jsxs)(e4.h,{children:[(0,n.jsx)(e7.x,{children:"Embed Youtube Video"}),(0,n.jsx)(te.o,{}),(0,n.jsx)(tt.f,{children:(0,n.jsx)("form",{children:(0,n.jsx)(to.NI,{isRequired:!0,isInvalid:null==a?void 0:a.youtubeUrl,children:(0,n.jsx)(em.I,{w:"full",id:"email",label:"Email",placeholder:"https://www.youtube.com/watch?v=4kz2qJznPP8",...r("youtubeUrl",{required:"Required",validate:tr})})})})}),(0,n.jsx)(tn.m,{children:(0,n.jsx)(D.z,{colorScheme:"blue",mr:3,onClick:l(s),children:"Embed"})})]})]})})}let ta=e$()(()=>Promise.resolve().then(o.bind(o,22155)),{loadableGenerated:{webpack:()=>[22155]},ssr:!1}),ts=()=>(0,n.jsx)("div",{className:"editor-placeholder",children:"Enter some rich text..."});function tc(e){console.error(e)}function td(e){let t=e.prototype.exportDOM;e.prototype.exportDOM=function(e){let o=t.apply(this,[e]),n=o.element;if(n){let e=this.getFormatType();n.style.textAlign=e;let t=this.getDirection();t&&(n.dir=t);let o=this.getIndent();o>0&&(n.style.textIndent="".concat(20*o,"px"))}return o}}var tu=e=>{let{name:t,control:o,htmlContent:s,jsonContent:N,saveContentWhenImageAdded:j,className:w}=e;td(x.HeadingNode),td(C.ListNode),td(x.QuoteNode);let v={namespace:"MyEditor",theme:e0,onError:tc,nodes:[x.HeadingNode,C.ListNode,C.ListItemNode,x.QuoteNode,f.CodeNode,f.CodeHighlightNode,r.TableNode,r.TableCellNode,r.TableRowNode,_.AutoLinkNode,_.LinkNode,eb.HJ,e8]},{field:k}=(0,eL.bc)({name:t,control:o}),[A,S]=(0,y.useState)(!1),{isOpen:M,onOpen:O,onClose:T}=(0,eR.q)(),{isOpen:R,onOpen:D,onClose:L}=(0,eR.q)(),I=(0,y.useRef)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eD.xu,{ref:I}),(0,n.jsx)(g.LexicalComposer,{initialConfig:v,children:(0,n.jsxs)(E.k,{flexDirection:"column",flex:"1",className:"editor-container ".concat(w||""),children:[(0,n.jsx)(eO,{showImageModal:O,showYoutubeModal:D,isImageUpload:!!j,passRef:I}),(0,n.jsxs)(eD.xu,{className:"editor-inner",children:[(0,n.jsx)(d.RichTextPlugin,{contentEditable:(0,n.jsx)("div",{ref:e=>{null!==e&&S(e)},children:(0,n.jsx)(l.ContentEditable,{className:"editor-input"})}),placeholder:(0,n.jsx)(ts,{}),ErrorBoundary:c()}),(0,n.jsx)(h.HistoryPlugin,{}),(0,n.jsx)(a.AutoFocusPlugin,{}),(0,n.jsx)(eU,{}),(0,n.jsx)(p.ListPlugin,{}),(0,n.jsx)(m.LinkPlugin,{}),(0,n.jsx)(eX,{}),(0,n.jsx)(eP,{maxDepth:7}),(0,n.jsx)(i.MarkdownShortcutPlugin,{transformers:eT.TRANSFORMERS}),(0,n.jsx)(u.OnChangePlugin,{onChange:(e,t)=>{e.read(()=>{let o=(0,b.$generateHtmlFromNodes)(t,null);k.onChange({htmlString:o,editorState:e.toJSON()})})}}),(0,n.jsx)(ta,{}),(0,n.jsx)(eQ,{htmlString:s,jsonContent:N}),A&&(0,n.jsx)(eW,{anchorElem:A}),(0,n.jsx)(eY.ImageUploaderPlugin,{isOpen:M,onClose:T,saveContentWhenImageAdded:j}),(0,n.jsx)(tl,{isOpen:R,onClose:L})]})]})})]})}},70433:function(e,t,o){o.d(t,{HB:function(){return c},HJ:function(){return s},dP:function(){return d}});var n=o(85893),i=o(32998),r=o(67294);let l=r.lazy(()=>o.e(8043).then(o.bind(o,48043)));function a(e){if(e instanceof HTMLImageElement){let{alt:t,src:o}=e,n=c({altText:t,src:o});return{node:n}}return null}class s extends i.DecoratorNode{static getType(){return"image"}static clone(e){return new s(e.__src,e.__altText,e.__width,e.__height,e.__showCaption,e.__caption,e.__captionsEnabled,e.__key,e.__alignment)}static importJSON(e){var t;let{altText:o,height:n,width:i,maxWidth:r,caption:l,src:a,showCaption:s,alignment:d}=e,u=c({altText:o,height:n,maxWidth:r,showCaption:s,src:a,width:i,alignment:d}),h=u.__caption,g=null==h?void 0:null===(t=h.parseEditorState)||void 0===t?void 0:t.call(h,null==l?void 0:l.editorState);return g.isEmpty()||h.setEditorState(g),u}exportDOM(){let e=document.createElement("img"),t=document.createElement("div");return t.appendChild(e),e.setAttribute("src",this.__src),e.setAttribute("alt",this.__altText),e.setAttribute("width",this.__width),e.setAttribute("height",this.__height),t.setAttribute("style","display:flex; justify-content: ".concat(this.__alignment,"; align-items:center;")),{element:t}}static importDOM(){return{img:e=>({conversion:a,priority:0})}}exportJSON(){var e,t;return{altText:this.getAltText(),caption:null===(t=this.__caption)||void 0===t?void 0:null===(e=t.toJSON)||void 0===e?void 0:e.call(t),height:"inherit"===this.__height?0:this.__height,maxWidth:this.__maxWidth,showCaption:this.__showCaption,src:this.getSrc(),type:"image",version:1,width:"inherit"===this.__width?0:this.__width,alignment:this.__alignment||"right"}}setWidthAndHeight(e,t){let o=this.getWritable();o.__width=e,o.__height=t}setParentAlignment(e){let t=this.getWritable();t.__alignment=e}setShowCaption(e){let t=this.getWritable();t.__showCaption=e}createDOM(e){let t=document.createElement("span"),o=e.theme,n=o.image;return void 0!==n&&(t.className=n),t}updateDOM(){return!1}getSrc(){return this.__src}getAltText(){return this.__altText}decorate(){return(0,n.jsx)(r.Suspense,{fallback:null,children:(0,n.jsx)(l,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,maxWidth:this.__maxWidth,nodeKey:this.getKey(),showCaption:this.__showCaption,caption:this.__caption,captionsEnabled:this.__captionsEnabled,resizable:!0})})}constructor(e,t,o,n,r,l,a,s,c){super(s),this.__src=e,this.__altText=t,this.__width=o||"inherit",this.__height=n||"inherit",this.__showCaption=r||!1,this.__caption=l||(0,i.createEditor)(),this.__captionsEnabled=a||void 0===a,this.__alignment=c||"right"}}function c(e){let{altText:t,height:o,captionsEnabled:n,src:i,width:r,showCaption:l,caption:a,key:c,alignment:d}=e;return new s(i,t,r,o,l,a,n,c,d)}function d(e){return e instanceof s}},22155:function(e,t,o){o.r(t),o.d(t,{INSERT_IMAGE_COMMAND:function(){return $},ImageUploaderPlugin:function(){return P},default:function(){return B}});var n=o(85893),i=o(98353),r=o(65291),l=o(77374),a=o(10191),s=o(23438),c=o(56880),d=o(7754),u=o(23100),h=o(89154),g=o(93863),m=o(25322),p=o(28129),x=o(57386),f=o(96272),_=o(32998),b=o(84260),C=o(76969),N=o(67294),y=o(13718),j=o(53416),w=o(25675),v=o.n(w),k=o(12498),A=o(90634),S=o(56877),M=o(24804),E=o(88911),O=o(88845),T=e=>{let{onUpload:t,...o}=e,i=(0,k.ff)("white","gray.800");return(0,n.jsxs)(u.xu,{px:"6",py:"4",bg:i,borderWidth:"1px",borderRadius:"lg",position:"relative",_hover:{transition:"all .7s",boxShadow:"lg"},...o,children:[(0,n.jsxs)(A.g,{spacing:"3",children:[(0,n.jsx)(u.bK,{size:"10",bg:"bg-subtle",borderRadius:"lg",children:(0,n.jsx)(S.J,{as:O.Z,boxSize:"5",color:"muted"})}),(0,n.jsxs)(A.g,{spacing:"1",children:[(0,n.jsxs)(M.U,{spacing:"1",whiteSpace:"nowrap",children:[(0,n.jsx)(f.z,{variant:"link",colorScheme:"blue",size:"sm",children:"Click to upload"}),(0,n.jsx)(E.x,{fontSize:"sm",color:"muted",children:"or drag and drop"})]}),(0,n.jsx)(E.x,{fontSize:"xs",color:"muted",children:"PNG, JPG or GIF up to 4MB"})]})]}),(0,n.jsx)(p.I,{cursor:"pointer",multiple:!1,type:"file",height:"100%",width:"100%",position:"absolute",top:"0",left:"0",opacity:"0","aria-hidden":"true",accept:"image/*",onChange:e=>{e.target.files&&e.target.files.length&&t(e.target.files)}})]})},R=o(77988),D=o(70433);let L=void 0!==window.document&&void 0!==window.document.createElement,I=e=>L?(e||window).getSelection():null,$=(0,_.createCommand)("INSERT_IMAGE_COMMAND"),P=e=>{let{isOpen:t,onClose:o,saveContentWhenImageAdded:_=async()=>{}}=e,[C]=(0,b.useLexicalComposerContext)(),[w]=(0,R.Z)({folderPath:"articles-editor"}),[k,A]=(0,N.useState)(null),[S,M]=(0,N.useState)(""),[E,O]=(0,N.useState)(!1),D=(0,N.useRef)(!1);(0,N.useEffect)(()=>{D.current=!1;let e=e=>{D.current=e.altKey};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[C]);let L=e=>{C.dispatchCommand($,e),o()},I=()=>{A(null),o()},P=async()=>{try{O(!0);let e=await w(k,(0,j.x0)(16,"0123456789abcdefghijklmnopqrstuvwxyz"));L({altText:S,src:e.link}),await _(),I(),O(!1)}catch(e){O(!1),console.error(e)}},z=async e=>A(e[0]);return(0,n.jsxs)(i.u_,{isOpen:t,onClose:I,isCentered:!0,children:[(0,n.jsx)(r.Z,{}),(0,n.jsxs)(l.h,{children:[(0,n.jsx)(a.x,{children:"Upload image"}),(0,n.jsx)(s.o,{}),(0,n.jsx)(c.f,{pb:6,children:k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.M,{children:(0,n.jsxs)(u.xu,{width:200,position:"relative",children:[(0,n.jsx)(h.h,{position:"absolute",top:0,right:-8,variant:"link",icon:(0,n.jsx)(y.Z,{}),onClick:()=>A(null)}),(0,n.jsx)(v(),{width:200,height:150,src:URL.createObjectURL(k),alt:S||""})]})}),(0,n.jsxs)(g.B,{mt:5,children:[(0,n.jsx)(m.Ui,{children:"Alt Text"}),(0,n.jsx)(p.I,{placeholder:"Descriptive alternative text",onChange:e=>M(e.target.value)})]})]}):(0,n.jsx)(T,{onUpload:z})}),(0,n.jsx)(x.m,{children:(0,n.jsx)(f.z,{variant:"ghost",isLoading:E,onClick:P,isDisabled:E||!k||!S,children:"Confirm"})})]})]})};function z(){let e=(0,_.$getSelection)();if(!(0,_.$isNodeSelection)(e))return null;let t=e.getNodes()[0];return(0,D.dP)(t)?t:null}function F(e){let t=e.target;return!!(t&&t instanceof HTMLElement&&!t.closest("code, span.editor-image")&&t.parentElement&&t.parentElement.closest("div.ContentEditable__root"))}var B=e=>{let{captionsEnabled:t}=e,[o]=(0,b.useLexicalComposerContext)(),n=(0,N.useMemo)(()=>{let e=document.createElement("img");return e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e},[]);return(0,N.useEffect)(()=>{if(!o.hasNodes([D.HJ]))throw Error("ImagesPlugin: ImageNode not registered on editor");return(0,C.mergeRegister)(o.registerCommand($,e=>{let t=(0,D.HB)(e),n=(0,_.$getPreviousSelection)(o);return n.insertNodes([t]),(0,_.$isRootOrShadowRoot)(t.getParentOrThrow())&&(0,C.$wrapNodeInElement)(t,_.$createParagraphNode).selectEnd(),!0},_.COMMAND_PRIORITY_EDITOR),o.registerCommand(_.DRAGSTART_COMMAND,e=>(function(e,t){let o=z();if(!o)return!1;let n=e.dataTransfer;return!!n&&(n.setData("text/plain","_"),n.setDragImage(t,0,0),n.setData("application/x-lexical-drag",JSON.stringify({data:{altText:o.__altText,caption:o.__caption,height:o.__height,key:o.getKey(),maxWidth:o.__maxWidth,showCaption:o.__showCaption,src:o.__src,width:o.__width},type:"image"})),!0)})(e,n),_.COMMAND_PRIORITY_HIGH),o.registerCommand(_.DRAGOVER_COMMAND,e=>(function(e){let t=z();return!!t&&(F(e)||e.preventDefault(),!0)})(e),_.COMMAND_PRIORITY_LOW),o.registerCommand(_.DROP_COMMAND,e=>(function(e,t){let o=z();if(!o)return!1;let n=function(e){var t;let o=null===(t=e.dataTransfer)||void 0===t?void 0:t.getData("application/x-lexical-drag");if(!o)return null;let{type:n,data:i}=JSON.parse(o);return"image"!==n?null:i}(e);if(!n)return!1;if(e.preventDefault(),F(e)){let i=function(e){let t;let o=e.target,n=null==o?null:9===o.nodeType?o.defaultView:o.ownerDocument.defaultView,i=I(n);if(document.caretRangeFromPoint)t=document.caretRangeFromPoint(e.clientX,e.clientY);else if(e.rangeParent&&null!==i)i.collapse(e.rangeParent,e.rangeOffset||0),t=i.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return t}(e);o.remove();let r=(0,_.$createRangeSelection)();null!=i&&r.applyDOMRange(i),(0,_.$setSelection)(r),t.dispatchCommand($,n)}return!0})(e,o),_.COMMAND_PRIORITY_HIGH))},[t,o]),null}}}]);