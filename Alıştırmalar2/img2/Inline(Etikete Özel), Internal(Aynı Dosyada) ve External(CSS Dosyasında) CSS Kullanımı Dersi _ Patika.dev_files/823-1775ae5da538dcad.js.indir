"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{90750:function(e,r,i){i.d(r,{j:function(){return a}});var s=i(33299),n=i(34180);let a=async()=>{let e=await(0,s.getSession)(),r=localStorage.getItem(n.fA);(null==e?void 0:e.accessToken)&&(!r||e.accessToken!==r)&&localStorage.setItem(n.fA,e.accessToken)}},20823:function(e,r,i){i.d(r,{Z:function(){return J}});var s=i(85893),n=i(98353),a=i(65291),o=i(77374),t=i(23438),l=i(56880),c=i(1004),d=i(56005),m=i(49394),u=i(80333),h=i(69558),p=i(5233),x=i(67294),g=i(93194),j=i(12498),f=i(96118),v=i(54232),y=i(70654),b=i(28129),k=i(96177),I=i(24804),w=i(81458),S=i(96272),N=i(31507),A=i(48543),F=i(97822),z=i(88911),C=i(39332),T=i(18403),U=i(33299),_=i(87536),q=i(41664),P=i.n(q),D=i(82120),K=i(55031),R=i(90750),M=i(8558),E=e=>{var r;let{providers:i,callback:n}=e,a=(0,g.p)(),o=(0,C.useRouter)(),{update:t}=(0,U.useSession)(),l=(0,x.useRef)(null),c=(0,C.useSearchParams)(),[d,m]=(0,x.useState)(!1),{colorMode:u}=(0,j.If)(),{t:h,i18n:q}=(0,p.$G)("auth"),{handleSubmit:E,register:L,formState:O,control:Z,setValue:G}=(0,_.cI)(),W=async e=>{var r;let{email:i,password:s,turnstileISecretKey:c}=e;try{let e=await(0,U.signIn)("credentials",{email:i,password:s,redirect:!1,turnstileISecretKey:c});if(null==e?void 0:e.error)throw Error(e.error);a({title:h("signInForm.welcome"),description:(0,M.Z)(),status:"success",duration:4e3,isClosable:!0}),await(0,R.j)(),await t({isMeteorTokenReady:!0}),n?n():o.refresh()}catch(e){a({title:"Login failed",description:h(e.message,"Unexpected error occurred: ".concat(e.message)),status:"error",duration:5e3,isClosable:!0}),null===(r=l.current)||void 0===r||r.reset()}},$="OAuthAccountNotLinked"===c.get("error");return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(f.K,{spacing:"6",as:v.m.form,onSubmit:E(W),mt:"6",children:[(0,s.jsxs)(f.K,{spacing:"8",children:[(0,s.jsxs)(y.NI,{isRequired:!0,isInvalid:null===(r=O.errors)||void 0===r?void 0:r.email,children:[(0,s.jsx)(b.I,{"data-peer":!0,id:"email",type:"email",placeholder:" ",autoComplete:"email",...L("email",{required:!0})}),(0,s.jsx)(k.l,{htmlFor:"email",variant:"floating",size:"md",children:h("signInForm.email")})]}),(0,s.jsx)(K.Z,{name:"password",control:Z,label:h("password"),rules:{required:!0}}),(0,s.jsx)(T.Nc,{ref:l,onExpire:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.reset()},options:{theme:u,language:q.language,refreshExpired:"manual"},siteKey:"0x4AAAAAAADjBeccgONhSi7k",onSuccess:e=>{G("turnstileISecretKey",e),m(!0)},onError:()=>{m(!0)},className:"turnstile"})]}),(0,s.jsxs)(I.U,{justify:"space-between",children:[(0,s.jsx)(w.X,{defaultChecked:!0,children:h("signInForm.rememberMe")}),(0,s.jsx)(S.z,{variant:"link",color:"primary.color",size:"sm",children:(0,s.jsxs)(P(),{href:"/reset-password",children:[" ",h("signInForm.forgotPassword")]})})]}),(0,s.jsxs)(f.K,{spacing:"8",children:[(0,s.jsx)(S.z,{type:"submit",variant:"primary",isDisabled:O.isSubmitting||!d,isLoading:O.isSubmitting||!d,"data-testid":"sign-in-button",children:h("signIn")}),$&&(0,s.jsxs)(N.b,{status:"warning",children:[(0,s.jsx)(A.z,{}),h("alreadyLinked")]}),(0,s.jsxs)(I.U,{children:[(0,s.jsx)(F.i,{}),(0,s.jsx)(z.x,{fontSize:"sm",whiteSpace:"nowrap",color:"muted",children:h("or")}),(0,s.jsx)(F.i,{})]}),(0,s.jsx)(D.c,{providers:i})]})]})})},L=i(70385),O=i(204),Z=i(11163),G=i(50319),W=i(57356),$=i(7909),B=i(93844),V=i(31911),H=e=>{var r,i,n;let{providers:a={}}=e,o=(0,g.p)(),t=(0,C.useRouter)(),{update:l}=(0,U.useSession)(),{query:c}=(0,Z.useRouter)(),d=(0,x.useRef)(null),{colorMode:m}=(0,j.If)(),u=(0,C.useSearchParams)(),[h]=(0,G.D)(B.KN),{t:w,i18n:q}=(0,p.$G)(["auth","common"]),[P,M]=(0,L.k)(),[E,H]=(0,x.useState)(!1),{handleSubmit:X,register:J,formState:Q,control:Y,setValue:ee}=(0,_.cI)();"callbackUrl"in c&&c.callbackUrl;let er=async e=>{let{email:r,password:i,firstName:s,lastName:n,isOlderThan18:a,turnstileISecretKey:c}=e;await h({variables:{email:r,password:i,firstName:s,lastName:n,...a&&{isOlderThan18:"yes"===a}},onCompleted:()=>{o({title:w("signUpForm.accountCreated"),description:w("signUpForm.weCreatedAccount"),status:"success",duration:1250,isClosable:!0}),setTimeout(async()=>{await(0,U.signIn)("credentials",{email:r,password:i,redirect:!1,turnstileISecretKey:c}),await(0,R.j)(),await l({isMeteorTokenReady:!0}),t.push("/verify-email")},1250)},onError:()=>{var e;null===(e=d.current)||void 0===e||e.reset()}})},ei=(0,_.qo)({control:Y,name:"password"}),es="OAuthAccountNotLinked"===u.get("error");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.K,{spacing:"8",as:v.m.form,onSubmit:X(er),mt:"6",children:[(0,s.jsxs)(f.K,{spacing:"6",children:[(0,s.jsxs)(y.NI,{isRequired:!0,isInvalid:null===(r=Q.errors)||void 0===r?void 0:r.firstName,children:[(0,s.jsx)(b.I,{"data-peer":!0,id:"firstName",type:"firstName",placeholder:" ",autoComplete:"firstName",...J("firstName",{required:!0})}),(0,s.jsx)(k.l,{htmlFor:"firstName",variant:"floating",size:"md",children:w("signUpForm.firstName")})]}),(0,s.jsxs)(y.NI,{isRequired:!0,isInvalid:null===(i=Q.errors)||void 0===i?void 0:i.lastName,children:[(0,s.jsx)(b.I,{"data-peer":!0,id:"lastName",type:"lastName",placeholder:" ",autoComplete:"lastName",...J("lastName",{required:!0})}),(0,s.jsx)(k.l,{htmlFor:"lastName",variant:"floating",size:"md",children:w("signUpForm.lastName")})]}),(0,s.jsxs)(y.NI,{isRequired:!0,isInvalid:null===(n=Q.errors)||void 0===n?void 0:n.email,children:[(0,s.jsx)(b.I,{"data-peer":!0,id:"email",type:"email",placeholder:" ",autoComplete:"email",...J("email",{required:!0})}),(0,s.jsx)(k.l,{htmlFor:"email",variant:"floating",size:"md",children:w("signUpForm.email")})]}),(0,s.jsx)(K.Z,{control:Y,name:"password",label:w("password"),rules:{minLength:8,required:!0}}),(0,s.jsx)(K.Z,{control:Y,name:"confirmPassword",label:w("signUpForm.confirmPassword"),helper:w("signUpForm.passwordHelper"),rules:{minLength:8,required:!0,validate:e=>e===ei||w("signUpForm.passwordsDoNotMatch")}}),(0,s.jsx)(T.Nc,{options:{theme:m,language:q.language,refreshExpired:"manual"},ref:d,onExpire:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.reset()},siteKey:"0x4AAAAAAADjBeccgONhSi7k",onSuccess:e=>{ee("turnstileISecretKey",e),H(!0)},onError:()=>{H(!0)},className:"turnstile"})]}),P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(W.Z,{isRequired:!0,control:Y,name:"isOlderThan18",rules:{required:!0},options:[{value:"yes",label:w("common:yes")},{value:"no",label:w("common:no")}],label:w("signUpForm.isOlderThan18")}),(0,s.jsx)($.Z,{isRequired:!0,control:Y,name:"dataConsent",label:(0,s.jsx)(V.M,{}),rules:{required:!0},boxProps:{mr:2.5},labelProps:{display:"flex"},formControlProps:{mb:6,display:"flex",alignItems:"baseline"}})]}),(0,s.jsx)($.Z,{isRequired:!0,control:Y,name:"kvkkTerms",label:(0,s.jsx)(V.F,{isFromTurkey:P}),rules:{required:!0},boxProps:{mr:2.5},labelProps:{display:"flex"},formControlProps:{mb:6,display:"flex",alignItems:"baseline"},"data-testid":"kvkkTerms"}),(0,s.jsx)(S.z,{size:"lg",type:"submit",variant:"primary","data-testid":"sign-up-button",isLoading:Q.isSubmitting||!E,isDisabled:Q.isSubmitting||!E,children:w("signUp")}),es&&(0,s.jsxs)(N.b,{status:"warning",children:[(0,s.jsx)(A.z,{}),w("alreadyLinked")]}),(0,s.jsxs)(I.U,{children:[(0,s.jsx)(F.i,{}),(0,s.jsx)(z.x,{fontSize:"sm",whiteSpace:"nowrap",color:"muted",children:w("or")}),(0,s.jsx)(F.i,{})]}),(0,s.jsx)(D.c,{providers:a})]}),(0,s.jsx)(O.k,{justifyContent:"center",mt:6,children:(0,s.jsx)(S.z,{variant:"link",color:"primary.color",size:"sm",onClick:M.toggle,cursor:"pointer",children:P?w("signUpForm.notFromTurkey"):w("signUpForm.fromTurkey")})})]})},X=i(34180),J=e=>{let{isOpen:r,onClose:i,callback:g}=e,{t:j}=(0,p.$G)("auth"),{data:f,update:v}=(0,U.useSession)(),y=(0,Z.useRouter)(),{query:b,pathname:k,asPath:I}=y,w=(0,x.useCallback)(async e=>{var r,i,s,n;let a=localStorage.getItem(X.fA);a&&e.accessToken===a||(localStorage.setItem(X.fA,e.accessToken),await v({isMeteorTokenReady:!0})),(null==e?void 0:null===(i=e.user)||void 0===i?void 0:null===(r=i.profile)||void 0===r?void 0:r.lang)?y.push({pathname:k,query:b},I,{locale:null==e?void 0:null===(n=e.user)||void 0===n?void 0:null===(s=n.profile)||void 0===s?void 0:s.lang}):y.push(k)},[v]);return(0,x.useEffect)(()=>{f&&w(f)},[f,w]),(0,s.jsxs)(n.u_,{isOpen:r,onClose:i,children:[(0,s.jsx)(a.Z,{}),(0,s.jsxs)(o.h,{children:[(0,s.jsx)(t.o,{}),(0,s.jsx)(l.f,{children:(0,s.jsxs)(c.m,{variant:"unstyled",isLazy:!0,children:[(0,s.jsxs)(d.t,{children:[(0,s.jsx)(m.O,{_selected:{color:"primary.color",borderBottom:"2px solid",borderColor:"primary.color"},children:j("signIn")}),(0,s.jsx)(m.O,{_selected:{color:"primary.color",borderBottom:"2px solid",borderColor:"primary.color"},children:j("signUp")})]}),(0,s.jsxs)(u.n,{children:[(0,s.jsx)(h.x,{children:(0,s.jsx)(E,{callback:g})}),(0,s.jsx)(h.x,{children:(0,s.jsx)(H,{})})]})]})})]})]})}},31911:function(e,r,i){i.d(r,{F:function(){return c},M:function(){return d}});var s=i(85893),n=i(88911),a=i(54232),o=i(5233),t=i(41664),l=i.n(t);i(67294);let c=e=>{let{isFromTurkey:r}=e,{i18n:i}=(0,o.$G)("auth");return r?"en"===i.language?(0,s.jsxs)(n.x,{fontSize:"sm",children:["I consent to the transfer of my personal data abroad for Google Drive / Microsoft storage services with my express consent in accordance with Article 9/1 of the KVKK, limited to the purposes specified in the scope of"," ",(0,s.jsx)(l(),{href:"/privacy",target:"_blank",children:(0,s.jsx)(a.m.span,{color:"primary.color",fontWeight:"medium",_hover:{textDecoration:"underline"},children:"Informative Text on the Protection and Processing of Personal Data."})})]}):(0,s.jsxs)(n.x,{fontSize:"sm",children:["Işbu"," ",(0,s.jsx)(l(),{href:"/privacy",target:"_blank",children:(0,s.jsxs)(a.m.span,{color:"primary.color",fontWeight:"medium",_hover:{textDecoration:"underline"},children:["Aydınlatma Metni"," "]})}),"kapsamında belirtilen ama\xe7lar ile sinirli olarak kişisel verilerimin KVKK Md.9/1 uyarınca acık rızam dahilinde Google Drive/Microsoft saklama hizmetleri i\xe7in yurt dışına aktarılmasını onaylıyorum."]}):"en"===i.language?(0,s.jsxs)(n.x,{fontSize:"sm",children:["I agree to the terms and"," ",(0,s.jsx)(l(),{href:"/privacy-policy",target:"_blank",children:(0,s.jsx)(a.m.span,{color:"primary.color",fontWeight:"medium",_hover:{textDecoration:"underline"},children:"conditions."})})]}):(0,s.jsxs)(n.x,{fontSize:"sm",children:["Işbu"," ",(0,s.jsxs)(l(),{href:"/privacy-policy",target:"_blank",children:[(0,s.jsx)(a.m.span,{color:"primary.color",fontWeight:"medium",_hover:{textDecoration:"underline"},children:"Aydinlatma Metni"}),"‘ni okudum onaylıyorum."]})]})},d=()=>{let{i18n:e}=(0,o.$G)("auth");return"en"===e.language?(0,s.jsxs)(n.x,{children:["I have read and approved this"," ",(0,s.jsx)(l(),{href:"https://cohorts.patika.dev/terms",target:"_blank",children:(0,s.jsx)(a.m.span,{color:"primary.color",fontWeight:"medium",_hover:{textDecoration:"underline"},children:"Informative Text on the Protection and Processing of Personal Data."})})]}):(0,s.jsxs)(n.x,{fontSize:"sm",children:["Işbu"," ",(0,s.jsxs)(l(),{href:"https://cohorts.patika.dev/terms",target:"_blank",children:[(0,s.jsx)(a.m.span,{color:"primary.color",fontWeight:"medium",_hover:{textDecoration:"underline"},children:"Aydinlatma Metni"}),"‘ni okudum onaylıyorum."]})]})}}}]);