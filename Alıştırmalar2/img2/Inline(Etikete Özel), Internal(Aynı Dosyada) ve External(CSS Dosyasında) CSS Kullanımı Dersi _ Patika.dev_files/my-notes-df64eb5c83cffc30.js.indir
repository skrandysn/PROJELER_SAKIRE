(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4002],{13718:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var o=n(84297);let i=(0,o.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},51991:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-notes",function(){return n(69470)}])},69470:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return A},default:function(){return D}});var o=n(85893),i=n(93194),r=n(7335),s=n(23100),l=n(14418),d=n(88911),a=n(31708),c=n(67294),u=n(71641),f=n(50319),h=n(5233),x=n(87536),p=n(23279),m=n.n(p),y=n(9008),g=n.n(y),v=n(1751),b=n(80797),j=n(58606),_=n(22650),S=n(776),w=n(89154),N=n(29379),I=n(93344),C=n(81608),k=n(65291),O=n(10191),E=n(56880),P=n(57386),R=n(96272),T=n(13718),$=e=>{let{note:t,onClick:n}=e,s=(0,i.p)(),l=(0,c.useRef)(),{t:a}=(0,h.$G)(["my-notes","common"]),{isOpen:u,onOpen:x,onClose:p}=(0,r.q)(),[m,{loading:y}]=(0,f.D)(b.Y,{update(e){let n=e.identify({_id:t._id,__typename:"Note"});e.evict({id:n}),e.gc()}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(S.P,{height:"full",sx:{aspectRatio:"1"},_hover:{cursor:"pointer",opacity:"0.7"},onClick:n,position:"relative",children:[(0,o.jsx)(w.h,{position:"absolute",top:2,right:0,variant:"link",icon:(0,o.jsx)(T.Z,{size:20}),zIndex:1,onClick:e=>{e.stopPropagation(),x()}}),(0,o.jsx)(N.Z,{height:"full",borderRadius:"md",justifyContent:"center",alignItems:"center",children:(0,o.jsx)(I.O,{isLoaded:null!=t,children:(0,o.jsx)(d.x,{fontSize:"md",fontWeight:"medium",textAlign:"center",children:t.title})})})]},t.courseId),(0,o.jsx)(C.a,{isCentered:!0,onClose:p,isOpen:u,motionPreset:"slideInBottom",leastDestructiveRef:l,children:(0,o.jsx)(k.Z,{children:(0,o.jsxs)(C._,{children:[(0,o.jsx)(O.x,{fontSize:"lg",fontWeight:"bold",children:a("deleteNote")}),(0,o.jsx)(E.f,{children:a("deleteWarning")}),(0,o.jsxs)(P.m,{children:[(0,o.jsx)(R.z,{ref:l,onClick:p,isDisabled:y,children:a("common:cancel")}),(0,o.jsx)(R.z,{ml:3,bg:"red.500",isLoading:y,isDisabled:y,onClick:()=>{m({variables:{noteId:t._id}}).then(()=>{s({title:"Success",description:a("deleteNoteSuccess"),status:"success",duration:5e3,isClosable:!0}),p()})},children:a("common:delete")})]})]})})})]})},z=()=>{let e=(0,x.cI)(),t=(0,i.p)(),[n,p]=(0,c.useState)({}),{t:y}=(0,h.$G)("my-notes"),{data:{notes:S}}=(0,u.a)(j.X),[w,N]=(0,c.useState)({}),{isOpen:I,onOpen:C,onClose:k}=(0,r.q)(),[O,{loading:E}]=(0,f.D)(b.n);(0,c.useEffect)(()=>{let e=S.map(e=>({value:e.courseId,label:e.title}));N(e)},[]),(0,c.useEffect)(()=>{e.reset({notes:{value:null==n?void 0:n.courseId,label:null==n?void 0:n.title}})},[e,n]);let P=(0,c.useCallback)(e=>{p(e),C()},[C]),R=e.watch("notes");(0,c.useEffect)(()=>{if((null==R?void 0:R.value)!==void 0){let e=S.find(e=>(null==e?void 0:e.courseId)===(null==R?void 0:R.value));P(e)}},[R,P]);let T=(0,c.useMemo)(()=>m()(async e=>{let{notes:n,noteBody:o}=e;await O({variables:{courseId:n.value,body:o.htmlString,bodyJSON:o.editorState},onError:()=>{}}),t({title:"Success",description:y("success"),status:"success",duration:2e3,isClosable:!0})},3e3),[O,y,t]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g(),{children:(0,o.jsx)("title",{children:y("my.notes")})}),(0,o.jsxs)(s.xu,{mt:-8,children:[(0,o.jsx)(v.Z,{}),(0,o.jsx)(l.X,{fontWeight:"semibold",fontSize:"xl",mb:"6",children:y("my.notes")}),0===S.length?(0,o.jsx)(d.x,{children:y("noNotes")}):(0,o.jsx)(a.r,{templateColumns:{base:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:"6",children:null==S?void 0:S.map(e=>(0,o.jsx)($,{note:e,onClick:()=>{P(e)}},e._id))}),(0,o.jsx)(_.Z,{form:e,isOpen:I,onClose:k,loading:E,noteBody:null==n?void 0:n.body,noteBodyJSON:null==n?void 0:n.bodyJSON,notesOptions:w,handleSubmit:T})]})]})};z.isHideBreadcrumbs=!0;var A=!0,D=z},1751:function(e,t,n){"use strict";var o=n(85893),i=n(23100),r=n(89783),s=n(48722);n(67294);var l=n(39332),d=n(5233);t.Z=()=>{let e=(0,l.usePathname)(),{t}=(0,d.$G)("common");return(0,o.jsx)(i.xu,{maxW:"full",w:"full",overflowX:"auto",mb:8,children:(0,o.jsxs)(r.h,{variant:"ghost",spacing:".5",pb:"5px",children:[(0,o.jsx)(s.fK,{href:"/dashboard",isActive:"/dashboard"===e,children:t("dashboardNavbar.dashboard")}),(0,o.jsx)(s.fK,{href:"/profile",isActive:"/profile"===e,children:t("dashboardNavbar.profile")}),(0,o.jsx)(s.fK,{href:"/my-courses",isActive:"/my-courses"===e,children:t("dashboardNavbar.educations")}),(0,o.jsx)(s.fK,{href:"/my-notes",isActive:"/my-notes"===e,children:t("dashboardNavbar.notes")})]})})}},22650:function(e,t,n){"use strict";var o=n(85893),i=n(67294),r=n(29379),s=n(23100),l=n(204),d=n(88911),a=n(89154),c=n(96272),u=n(42663),f=n(41352),h=n(11336),x=n(21951),p=n(5233),m=n(85625),y=n(17022);let g={display:"flex",position:"fixed",zIndex:"13"},v={open:{opacity:1,scale:1},closed:{opacity:0,scale:0}};t.Z=e=>{let{isOpen:t,onClose:n=()=>{},handleSubmit:b=()=>{},notesOptions:j,form:_,zIndex:S,noteBody:w="",noteBodyJSON:N,loading:I}=e,{t:C}=(0,p.$G)("my-notes"),k=(0,i.useRef)(null),O=(0,i.useRef)((0,y.av)(null!=w?w:"")),[E,P]=(0,i.useState)({x:0,y:50,width:500,height:400}),R=()=>{var e;null===(e=k.current)||void 0===e||e.updatePosition({x:50,y:50})};(0,i.useEffect)(()=>(window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R)}),[]),(0,i.useLayoutEffect)(()=>{if(t){var e;null===(e=k.current)||void 0===e||e.updatePosition({...E})}},[t]);let{control:T,handleSubmit:$,watch:z}=_||{},A=z("noteBody");return(0,i.useEffect)(()=>{O.current=(0,y.av)(null!=w?w:"")},[w]),(0,i.useEffect)(()=>{var e,t;let n=(0,y.av)(null!==(e=null==A?void 0:A.htmlString)&&void 0!==e?e:"")!==O.current;if(n&&A){O.current=(0,y.av)(null!==(t=null==A?void 0:A.htmlString)&&void 0!==t?t:"");let{notes:e,noteBody:n}=_.getValues();n.htmlString&&n.editorState&&b({notes:e,noteBody:{htmlString:n.htmlString,editorState:n.editorState}})}},[A,b]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.s,{style:{...g,visibility:t?"visible":"hidden",opacity:t?1:0,transition:"visibility 0.3s linear,opacity 0.3s linear",pointerEvents:t?"all":"none",cursor:t?"move":"none",zIndex:1e3},default:E,minWidth:300,minHeight:400,maxWidth:"100vw",maxHeight:"100vh",bounds:".note-container",ref:k,cancel:".no-drag",onResizeStop:(e,t,n)=>{P({...E,width:n.style.width,height:n.style.height})},onDragStop:(e,t)=>{P({...E,x:t.lastX,y:t.lastY})},children:(0,o.jsx)(h.E.div,{initial:"closed",animate:t?"open":"closed",variants:v,style:{display:"flex",flex:1,width:"100%",height:"100%"},transition:{duration:.3},children:(0,o.jsxs)(r.Z,{zIndex:S,flexDirection:"column",flex:1,p:"4",boxShadow:"2xl",_focus:{boxShadow:"2xl"},children:[(0,o.jsxs)(s.xu,{transform:"auto",rotate:"-45deg",w:"15px",display:"flex",justifyContent:"center",flexDir:"column",alignItems:"center",position:"absolute",right:"3px",bottom:"8px",children:[(0,o.jsx)(s.xu,{mb:"2px",bg:"gray.500",h:"1px",w:"15px"}),(0,o.jsx)(s.xu,{bg:"gray.500",w:"7.5px",h:"1px"})]}),(0,o.jsxs)(l.k,{mb:"4",justifyContent:"space-between",children:[(0,o.jsx)(d.x,{fontSize:"2xl",fontWeight:"bold",children:C("add.note")}),(0,o.jsx)(a.h,{variant:"ghost",onClick:n,"data-testid":"close-note",icon:(0,o.jsx)(f.Z,{}),color:"text.secondary.color",className:"no-drag"})]}),(0,o.jsxs)(l.k,{flexDirection:"column",flex:"1",gap:"4",height:"full",overflow:"auto",children:[(0,o.jsx)(l.k,{maxW:"290px",className:"no-drag",cursor:"default",children:(0,o.jsx)(x.Z,{control:T,name:"notes",color:"red.500",options:j,styles:{container:{color:"select.with.notes.text.color"},dropdownIndicator:{color:"select.with.notes.text.color"}},placeholder:C("note")})}),(0,o.jsx)(s.xu,{height:"full",overflow:"auto",children:(0,o.jsx)(m.Z,{name:"noteBody",className:"no-drag",control:T,htmlContent:w,jsonContent:N})}),(0,o.jsx)(l.k,{justifyContent:"flex-end",children:(0,o.jsx)(c.z,{className:"no-drag",isLoading:I,isDisabled:I,onClick:$(b),children:C("save")})})]})]})})})})}},80797:function(e,t,n){"use strict";n.d(t,{Y:function(){return d},n:function(){return l}});var o=n(82729),i=n(17283);function r(){let e=(0,o._)(["\n  mutation addOrUpdateNote($courseId: String!, $body: String!, $bodyJSON: Object) {\n    note: addOrUpdateNote(courseId: $courseId, body: $body, bodyJSON: $bodyJSON) {\n      _id\n      body\n      bodyJSON\n      title\n      userId\n      courseId\n    }\n  }\n"]);return r=function(){return e},e}function s(){let e=(0,o._)(["\n  mutation DeleteNote($noteId: String!) {\n    note: deleteNote(noteId: $noteId) {\n      _id\n    }\n  }\n"]);return s=function(){return e},e}let l=(0,i.Ps)(r()),d=(0,i.Ps)(s())},58606:function(e,t,n){"use strict";n.d(t,{X:function(){return d},l:function(){return l}});var o=n(82729),i=n(17283);function r(){let e=(0,o._)(["\n  query getCourseNote($courseId: String!) {\n    getCourseNote(courseId: $courseId) {\n      _id\n      body\n      courseId\n      title\n      userId\n    }\n  }\n"]);return r=function(){return e},e}function s(){let e=(0,o._)(["\n  query getAllNotes {\n    notes: getAllNotes {\n      _id\n      body\n      bodyJSON\n      courseId\n      title\n      userId\n    }\n  }\n"]);return s=function(){return e},e}let l=(0,i.Ps)(r()),d=(0,i.Ps)(s())},9008:function(e,t,n){e.exports=n(42636)},92703:function(e,t,n){"use strict";var o=n(50414);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,s){if(s!==o){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},31708:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var o=n(35059),i=n(54232),r=n(85893),s=(0,o.G)(function(e,t){let{templateAreas:n,gap:o,rowGap:s,columnGap:l,column:d,row:a,autoFlow:c,autoRows:u,templateRows:f,autoColumns:h,templateColumns:x,...p}=e;return(0,r.jsx)(i.m.div,{ref:t,__css:{display:"grid",gridTemplateAreas:n,gridGap:o,gridRowGap:s,gridColumnGap:l,gridAutoColumns:h,gridColumn:d,gridRow:a,gridAutoFlow:c,gridAutoRows:u,gridTemplateRows:f,gridTemplateColumns:x},...p})});s.displayName="Grid"},776:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});var o=n(35059),i=n(54232),r=n(87052),s=n(33951),l=n(85893);function d(e){return(0,s.XQ)(e,e=>"auto"===e?"auto":`span ${e}/span ${e}`)}var a=(0,o.G)(function(e,t){let{area:n,colSpan:o,colStart:s,colEnd:a,rowEnd:c,rowSpan:u,rowStart:f,...h}=e,x=(0,r.o)({gridArea:n,gridColumn:d(o),gridRow:d(u),gridColumnStart:s,gridColumnEnd:a,gridRowStart:f,gridRowEnd:c});return(0,l.jsx)(i.m.div,{ref:t,__css:x,...h})});a.displayName="GridItem"},57386:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var o=n(98353),i=n(25432),r=n(35059),s=n(54232),l=n(85893),d=(0,r.G)((e,t)=>{let{className:n,...r}=e,d=(0,i.cx)("chakra-modal__footer",n),a=(0,o.I_)(),c={display:"flex",alignItems:"center",justifyContent:"flex-end",...a.footer};return(0,l.jsx)(s.m.footer,{ref:t,...r,__css:c,className:d})});d.displayName="ModalFooter"},81608:function(e,t,n){"use strict";n.d(t,{_:function(){return d},a:function(){return l}});var o=n(77374),i=n(98353),r=n(35059),s=n(85893);function l(e){let{leastDestructiveRef:t,...n}=e;return(0,s.jsx)(i.u_,{...n,initialFocusRef:t})}var d=(0,r.G)((e,t)=>(0,s.jsx)(o.h,{ref:t,role:"alertdialog",...e}))}},function(e){e.O(0,[1559,2663,5625,9774,2888,179],function(){return e(e.s=51991)}),_N_E=e.O()}]);