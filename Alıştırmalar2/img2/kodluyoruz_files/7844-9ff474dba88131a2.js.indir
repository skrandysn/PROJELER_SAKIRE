(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7844],{98005:function(t){t.exports=function(){"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function e(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach(function(t){var r,a;r=t,a=i[t],(r=n(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function i(){return(i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function n(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var a,o,s,A,h,u,c,l={exports:{}};"undefined"!=typeof window&&(o=(a=window).HTMLCanvasElement&&a.HTMLCanvasElement.prototype,A=(s=a.Blob&&function(){try{return new Blob,!0}catch(t){return!1}}())&&a.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),h=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,u=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,c=(s||h)&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(t){var e,r,i,n,a,o,c,l,f;if(!(e=t.match(u)))throw Error("invalid data URI");for(l=0,r=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),i=!!e[4],n=t.slice(e[0].length),a=i?atob(n):decodeURIComponent(n),o=new ArrayBuffer(a.length),c=new Uint8Array(o);l<a.length;l+=1)c[l]=a.charCodeAt(l);return s?new Blob([A?c:o],{type:r}):((f=new h).append(o),f.getBlob(r))},a.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(t,e,r){var i=this;setTimeout(function(){r&&o.toDataURL&&c?t(c(i.toDataURL(e,r))):t(i.mozGetAsFile("blob",e))})}:o.toDataURL&&c&&(o.msToBlob?o.toBlob=function(t,e,r){var i=this;setTimeout(function(){(e&&"image/png"!==e||r)&&o.toDataURL&&c?t(c(i.toDataURL(e,r))):t(i.msToBlob(e))})}:o.toBlob=function(t,e,r){var i=this;setTimeout(function(){t(c(i.toDataURL(e,r)))})})),l.exports?l.exports=c:a.dataURLtoBlob=c);var f=l.exports,g={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},d="undefined"!=typeof window&&void 0!==window.document?window:{},p=function(t){return t>0&&t<1/0},m=Array.prototype.slice;function I(t){return Array.from?Array.from(t):m.call(t)}var v=/^image\/.+$/;function b(t){return v.test(t)}var w=String.fromCharCode,y=d.btoa;function B(t,e){for(var r=[],i=new Uint8Array(t);i.length>0;)r.push(w.apply(null,I(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat(e,";base64,").concat(y(r.join("")))}var E=/\.\d*(?:0|9){12}\d*$/;function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return E.test(t)?Math.round(t*e)/e:t}function Q(t){var e=t.aspectRatio,r=t.height,i=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",a=p(i),o=p(r);if(a&&o){var s=r*e;("contain"===n||"none"===n)&&s>i||"cover"===n&&s<i?r=i/e:i=r*e}else a?r=i/e:o&&(i=r*e);return{width:i,height:r}}var _=d.ArrayBuffer,M=d.FileReader,x=d.URL||d.webkitURL,D=/\.\w+$/,k=d.Compressor;return function(){var t,n;function a(t,r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,a),this.file=t,this.exif=[],this.image=new Image,this.options=e(e({},g),r),this.aborted=!1,this.result=null,this.init()}return t=[{key:"init",value:function(){var t=this,e=this.file,r=this.options;if(!("undefined"!=typeof Blob&&(e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e)))){this.fail(Error("The first argument must be a File or Blob object."));return}var n=e.type;if(!b(n)){this.fail(Error("The first argument must be an image File or Blob object."));return}if(!x||!M){this.fail(Error("The current browser does not support image compression."));return}_||(r.checkOrientation=!1,r.retainExif=!1);var a="image/jpeg"===n,o=a&&r.checkOrientation,s=a&&r.retainExif;if(!x||o||s){var A=new M;this.reader=A,A.onload=function(r){var a=r.target.result,A={},h=1;o&&(h=function(t){var e=new DataView(t);try{if(255===e.getUint8(0)&&216===e.getUint8(1))for(var r=e.byteLength,i=2;i+1<r;){if(255===e.getUint8(i)&&225===e.getUint8(i+1)){u=i;break}i+=1}if(u){var n=u+4,a=u+10;if("Exif"===function(t,e,r){var i,n="";for(r+=e,i=e;i<r;i+=1)n+=w(t.getUint8(i));return n}(e,n,4)){var o=e.getUint16(a);if(((h=18761===o)||19789===o)&&42===e.getUint16(a+2,h)){var s=e.getUint32(a+4,h);s>=8&&(c=a+s)}}}if(c){var A,h,u,c,l,f,g=e.getUint16(c,h);for(f=0;f<g;f+=1)if(l=c+12*f+2,274===e.getUint16(l,h)){l+=8,A=e.getUint16(l,h),e.setUint16(l,1,h);break}}}catch(t){A=1}return A}(a))>1&&i(A,function(t){var e=0,r=1,i=1;switch(t){case 2:r=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,r=-1;break;case 8:e=-90}return{rotate:e,scaleX:r,scaleY:i}}(h)),s&&(t.exif=function(t){for(var e=I(new Uint8Array(t)),r=e.length,i=[],n=0;n+3<r;){var a=e[n],o=e[n+1];if(255===a&&218===o)break;if(255===a&&216===o)n+=2;else{var s=256*e[n+2]+e[n+3],A=n+s+2,h=e.slice(n,A);i.push(h),n=A}}return i.reduce(function(t,e){return 255===e[0]&&225===e[1]?t.concat(e):t},[])}(a)),o||s?!x||h>1?A.url=B(a,n):A.url=x.createObjectURL(e):A.url=a,t.load(A)},A.onabort=function(){t.fail(Error("Aborted to read the image with FileReader."))},A.onerror=function(){t.fail(Error("Failed to read the image with FileReader."))},A.onloadend=function(){t.reader=null},o||s?A.readAsArrayBuffer(e):A.readAsDataURL(e)}else this.load({url:x.createObjectURL(e)})}},{key:"load",value:function(t){var r=this,i=this.file,n=this.image;n.onload=function(){r.draw(e(e({},t),{},{naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight}))},n.onabort=function(){r.fail(Error("Aborted to load the image."))},n.onerror=function(){r.fail(Error("Failed to load the image."))},d.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(d.navigator.userAgent)&&(n.crossOrigin="anonymous"),n.alt=i.name,n.src=t.url}},{key:"draw",value:function(t){var e=this,r=t.naturalWidth,i=t.naturalHeight,n=t.rotate,a=void 0===n?0:n,o=t.scaleX,s=void 0===o?1:o,A=t.scaleY,h=void 0===A?1:A,u=this.file,c=this.image,l=this.options,g=document.createElement("canvas"),d=g.getContext("2d"),m=Math.abs(a)%180==90,v=("contain"===l.resize||"cover"===l.resize)&&p(l.width)&&p(l.height),w=Math.max(l.maxWidth,0)||1/0,y=Math.max(l.maxHeight,0)||1/0,E=Math.max(l.minWidth,0)||0,_=Math.max(l.minHeight,0)||0,x=r/i,D=l.width,k=l.height;if(m){var O=[y,w];w=O[0],y=O[1];var R=[_,E];E=R[0],_=R[1];var U=[k,D];D=U[0],k=U[1]}v&&(x=D/k);var j=Q({aspectRatio:x,width:w,height:y},"contain");w=j.width,y=j.height;var P=Q({aspectRatio:x,width:E,height:_},"cover");if(E=P.width,_=P.height,v){var S=Q({aspectRatio:x,width:D,height:k},l.resize);D=S.width,k=S.height}else{var H=Q({aspectRatio:x,width:D,height:k}),G=H.width;D=void 0===G?r:G;var T=H.height;k=void 0===T?i:T}D=Math.floor(C(Math.min(Math.max(D,E),w))),k=Math.floor(C(Math.min(Math.max(k,_),y)));var L=-D/2,F=-k/2,W=D,q=k,z=[];if(v){var Y=0,N=0,J=r,X=i,K=Q({aspectRatio:x,width:r,height:i},{contain:"cover",cover:"contain"}[l.resize]);J=K.width,X=K.height,Y=(r-J)/2,N=(i-X)/2,z.push(Y,N,J,X)}if(z.push(L,F,W,q),m){var Z=[k,D];D=Z[0],k=Z[1]}g.width=D,g.height=k,b(l.mimeType)||(l.mimeType=u.type);var V="transparent";u.size>l.convertSize&&l.convertTypes.indexOf(l.mimeType)>=0&&(l.mimeType="image/jpeg");var $="image/jpeg"===l.mimeType;if($&&(V="#fff"),d.fillStyle=V,d.fillRect(0,0,D,k),l.beforeDraw&&l.beforeDraw.call(this,d,g),!this.aborted&&(d.save(),d.translate(D/2,k/2),d.rotate(a*Math.PI/180),d.scale(s,h),d.drawImage.apply(d,[c].concat(z)),d.restore(),l.drew&&l.drew.call(this,d,g),!this.aborted)){var tt=function(t){if(!e.aborted){var n=function(t){return e.done({naturalWidth:r,naturalHeight:i,result:t})};if(t&&$&&l.retainExif&&e.exif&&e.exif.length>0){var a=function(t){return n(f(B(function(t,e){var r=I(new Uint8Array(t));if(255!==r[2]||224!==r[3])return t;var i=256*r[4]+r[5],n=[255,216].concat(e,r.slice(4+i));return new Uint8Array(n)}(t,e.exif),l.mimeType)))};if(t.arrayBuffer)t.arrayBuffer().then(a).catch(function(){e.fail(Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var o=new M;e.reader=o,o.onload=function(t){a(t.target.result)},o.onabort=function(){e.fail(Error("Aborted to read the compressed image with FileReader."))},o.onerror=function(){e.fail(Error("Failed to read the compressed image with FileReader."))},o.onloadend=function(){e.reader=null},o.readAsArrayBuffer(t)}}else n(t)}};g.toBlob?g.toBlob(tt,l.mimeType,l.quality):tt(f(g.toDataURL(l.mimeType,l.quality)))}}},{key:"done",value:function(t){var e=t.naturalWidth,r=t.naturalHeight,i=t.result,n=this.file,a=this.image,o=this.options;if(x&&0===a.src.indexOf("blob:")&&x.revokeObjectURL(a.src),i){if(o.strict&&!o.retainExif&&i.size>n.size&&o.mimeType===n.type&&!(o.width>e||o.height>r||o.minWidth>e||o.minHeight>r||o.maxWidth<e||o.maxHeight<r))i=n;else{var s,A,h=new Date;i.lastModified=h.getTime(),i.lastModifiedDate=h,i.name=n.name,i.name&&i.type!==n.type&&(i.name=i.name.replace(D,("jpeg"===(A=b(s=i.type)?s.substr(6):"")&&(A="jpg"),".".concat(A))))}}else i=n;this.result=i,o.success&&o.success.call(this,i)}},{key:"fail",value:function(t){var e=this.options;if(e.error)e.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],n=[{key:"noConflict",value:function(){return window.Compressor=k,a}},{key:"setDefaults",value:function(t){i(g,t)}}],t&&r(a.prototype,t),n&&r(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}()}()},9008:function(t,e,r){t.exports=r(42636)},16373:function(t){t.exports=(function t(e,r,i){function n(o,s){if(!r[o]){if(!e[o]){if(a)return a(o,!0);var A=Error("Cannot find module '"+o+"'");throw A.code="MODULE_NOT_FOUND",A}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){return n(e[o][1][t]||t)},h,h.exports,t,e,r,i)}return r[o].exports}for(var a=void 0,o=0;o<i.length;o++)n(i[o]);return n})({1:[function(t,e,r){"use strict";var i=t("multimath"),n=t("./mm_unsharp_mask"),a=t("./mm_resize");function o(t){var e=t||[],r={js:e.indexOf("js")>=0,wasm:e.indexOf("wasm")>=0};i.call(this,r),this.features={js:r.js,wasm:r.wasm&&this.has_wasm()},this.use(n),this.use(a)}o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.resizeAndUnsharp=function(t,e){var r=this.resize(t,e);return t.unsharpAmount&&this.unsharp_mask(r,t.toWidth,t.toHeight,t.unsharpAmount,t.unsharpRadius,t.unsharpThreshold),r},e.exports=o},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(t,e,r){"use strict";function i(t){return t<0?0:t>255?255:t}function n(t){return t>=0?t:0}e.exports={convolveHor:function(t,e,r,i,a,o){var s,A,h,u,c,l,f,g,d,p,m,I=0,v=0;for(d=0;d<i;d++){for(p=0,c=0;p<a;p++){for(l=o[c++],f=o[c++],g=I+4*l|0,s=A=h=u=0;f>0;f--)u=u+(m=o[c++])*t[g+3]|0,h=h+m*t[g+2]|0,A=A+m*t[g+1]|0,s=s+m*t[g]|0,g=g+4|0;e[v+3]=n(u>>7),e[v+2]=n(h>>7),e[v+1]=n(A>>7),e[v]=n(s>>7),v=v+4*i|0}v=(d+1)*4|0,I=(d+1)*r*4|0}},convolveVert:function(t,e,r,n,a,o){var s,A,h,u,c,l,f,g,d,p,m,I=0,v=0;for(d=0;d<n;d++){for(p=0,c=0;p<a;p++){for(l=o[c++],f=o[c++],g=I+4*l|0,s=A=h=u=0;f>0;f--)u=u+(m=o[c++])*t[g+3]|0,h=h+m*t[g+2]|0,A=A+m*t[g+1]|0,s=s+m*t[g]|0,g=g+4|0;s>>=7,A>>=7,h>>=7,u>>=7,e[v+3]=i(u+8192>>14),e[v+2]=i(h+8192>>14),e[v+1]=i(A+8192>>14),e[v]=i(s+8192>>14),v=v+4*n|0}v=(d+1)*4|0,I=(d+1)*r*4|0}},convolveHorWithPre:function(t,e,r,i,a,o){var s,A,h,u,c,l,f,g,d,p,m,I,v=0,b=0;for(p=0;p<i;p++){for(m=0,l=0;m<a;m++){for(f=o[l++],g=o[l++],d=v+4*f|0,s=A=h=u=0;g>0;g--)u=u+(I=o[l++])*(c=t[d+3])|0,h=h+I*t[d+2]*c|0,A=A+I*t[d+1]*c|0,s=s+I*t[d]*c|0,d=d+4|0;h=h/255|0,A=A/255|0,s=s/255|0,e[b+3]=n(u>>7),e[b+2]=n(h>>7),e[b+1]=n(A>>7),e[b]=n(s>>7),b=b+4*i|0}b=(p+1)*4|0,v=(p+1)*r*4|0}},convolveVertWithPre:function(t,e,r,n,a,o){var s,A,h,u,c,l,f,g,d,p,m,I=0,v=0;for(d=0;d<n;d++){for(p=0,c=0;p<a;p++){for(l=o[c++],f=o[c++],g=I+4*l|0,s=A=h=u=0;f>0;f--)u=u+(m=o[c++])*t[g+3]|0,h=h+m*t[g+2]|0,A=A+m*t[g+1]|0,s=s+m*t[g]|0,g=g+4|0;s>>=7,A>>=7,h>>=7,u>>=7,(u=i(u+8192>>14))>0&&(s=255*s/u|0,A=255*A/u|0,h=255*h/u|0),e[v+3]=u,e[v+2]=i(h+8192>>14),e[v+1]=i(A+8192>>14),e[v]=i(s+8192>>14),v=v+4*n|0}v=(d+1)*4|0,I=(d+1)*r*4|0}}}},{}],3:[function(t,e,r){"use strict";e.exports="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"},{}],4:[function(t,e,r){"use strict";e.exports={name:"resize",fn:t("./resize"),wasm_fn:t("./resize_wasm"),wasm_src:t("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(t,e,r){"use strict";var i=t("./resize_filter_gen"),n=t("./convolve"),a=n.convolveHor,o=n.convolveVert,s=n.convolveHorWithPre,A=n.convolveVertWithPre;e.exports=function(t){var e=t.src,r=t.width,n=t.height,h=t.toWidth,u=t.toHeight,c=t.scaleX||t.toWidth/t.width,l=t.scaleY||t.toHeight/t.height,f=t.offsetX||0,g=t.offsetY||0,d=t.dest||new Uint8Array(h*u*4),p=void 0===t.filter?"mks2013":t.filter,m=i(p,r,h,c,f),I=i(p,n,u,l,g),v=new Uint16Array(h*n*4);return!function(t,e,r){for(var i=3,n=e*r*4|0;i<n;){if(255!==t[i])return!0;i=i+4|0}return!1}(e,r,n)?(a(e,v,r,n,h,m),o(v,d,n,h,u,I),function(t,e,r){for(var i=3,n=e*r*4|0;i<n;)t[i]=255,i=i+4|0}(d,h,u)):(s(e,v,r,n,h,m),A(v,d,n,h,u,I)),d}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(t,e,r){"use strict";var i=t("./resize_filter_info");function n(t){return Math.round(16383*t)}e.exports=function(t,e,r,a,o){var s,A,h,u,c,l,f,g,d,p,m,I,v,b,w,y,B,E=i.filter[t].fn,C=1/a,Q=Math.min(1,a),_=i.filter[t].win/Q,M=new Int16Array((Math.floor((_+1)*2)+2)*r),x=0,D=!M.subarray||!M.set;for(s=0;s<r;s++){for(h=Math.max(0,Math.floor((A=(s+.5)*C+o)-_)),c=(u=Math.min(e-1,Math.ceil(A+_)))-h+1,l=new Float32Array(c),f=new Int16Array(c),g=0,d=h,p=0;d<=u;d++,p++)g+=m=E((d+.5-A)*Q),l[p]=m;for(p=0,I=0;p<l.length;p++)I+=v=l[p]/g,f[p]=n(v);for(f[r>>1]+=n(1-I),b=0;b<f.length&&0===f[b];)b++;if(b<f.length){for(w=f.length-1;w>0&&0===f[w];)w--;if(y=h+b,B=w-b+1,M[x++]=y,M[x++]=B,D)for(p=b;p<=w;p++)M[x++]=f[p];else M.set(f.subarray(b,w+1),x),x+=B}else M[x++]=0,M[x++]=0}return M}},{"./resize_filter_info":7}],7:[function(t,e,r){"use strict";e.exports={filter:{box:{win:.5,fn:function(t){return t<0&&(t=-t),t<.5?1:0}},hamming:{win:1,fn:function(t){if(t<0&&(t=-t),t>=1)return 0;if(t<11920929e-14)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},lanczos2:{win:2,fn:function(t){if(t<0&&(t=-t),t>=2)return 0;if(t<11920929e-14)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},lanczos3:{win:3,fn:function(t){if(t<0&&(t=-t),t>=3)return 0;if(t<11920929e-14)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}},mks2013:{win:2.5,fn:function(t){return(t<0&&(t=-t),t>=2.5)?0:t>=1.5?-.125*(t-2.5)*(t-2.5):t>=.5?.25*(4*t*t-11*t+7):1.0625-1.75*t*t}}},f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(t,e,r){"use strict";var i=t("./resize_filter_gen"),n=!0;try{n=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(t){}function a(t,e,r){if(n){e.set(new Uint8Array(t.buffer,0,t.byteLength),r);return}for(var i=r,a=0;a<t.length;a++){var o=t[a];e[i++]=255&o,e[i++]=o>>8&255}}e.exports=function(t){var e=t.src,r=t.width,n=t.height,o=t.toWidth,s=t.toHeight,A=t.scaleX||t.toWidth/t.width,h=t.scaleY||t.toHeight/t.height,u=t.offsetX||0,c=t.offsetY||0,l=t.dest||new Uint8Array(o*s*4),f=void 0===t.filter?"mks2013":t.filter,g=i(f,r,o,A,u),d=i(f,n,s,h,c),p=Math.max(e.byteLength,l.byteLength),m=this.__align(0+p),I=n*o*8,v=this.__align(m+I),b=this.__align(v+g.byteLength),w=b+d.byteLength,y=this.__instance("resize",w),B=new Uint8Array(this.__memory.buffer),E=new Uint32Array(this.__memory.buffer),C=new Uint32Array(e.buffer);E.set(C),a(g,B,v),a(d,B,b);var Q=y.exports.convolveHV||y.exports._convolveHV;return!function(t,e,r){for(var i=3,n=e*r*4|0;i<n;){if(255!==t[i])return!0;i=i+4|0}return!1}(e,r,n)?(Q(v,b,m,r,n,o,s,0),function(t,e,r){for(var i=3,n=e*r*4|0;i<n;)t[i]=255,i=i+4|0}(l,o,s)):Q(v,b,m,r,n,o,s,1),new Uint32Array(l.buffer).set(new Uint32Array(this.__memory.buffer,0,s*o)),l}},{"./resize_filter_gen":6}],9:[function(t,e,r){"use strict";e.exports={name:"unsharp_mask",fn:t("./unsharp_mask"),wasm_fn:t("./unsharp_mask_wasm"),wasm_src:t("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(t,e,r){"use strict";var i=t("glur/mono16");e.exports=function(t,e,r,n,a,o){if(0!==n&&!(a<.5)){a>2&&(a=2);var s,A,h,u,c,l=function(t,e,r){for(var i,n,a,o,s=e*r,A=new Uint16Array(s),h=0;h<s;h++)i=t[4*h],n=t[4*h+1],a=t[4*h+2],o=i>=n&&i>=a?i:n>=a&&n>=i?n:a,A[h]=o<<8;return A}(t,e,r),f=new Uint16Array(l);i(f,e,r,a);for(var g=n/100*4096+.5|0,d=o<<8,p=e*r,m=0;m<p;m++)Math.abs(u=(s=l[m])-f[m])>=d&&(h=((A=(A=(A=s+(g*u+2048>>12))>65280?65280:A)<0?0:A)<<12)/(s=0!==s?s:1)|0,t[c=4*m]=t[c]*h+2048>>12,t[c+1]=t[c+1]*h+2048>>12,t[c+2]=t[c+2]*h+2048>>12)}}},{"glur/mono16":18}],11:[function(t,e,r){"use strict";e.exports=function(t,e,r,i,n,a){if(0!==i&&!(n<.5)){n>2&&(n=2);var o=e*r,s=4*o,A=2*o,h=2*o,u=4*Math.max(e,r),c=s+A,l=c+h,f=l+h,g=f+u,d=this.__instance("unsharp_mask",s+A+2*h+u+32,{exp:Math.exp}),p=new Uint32Array(t.buffer);new Uint32Array(this.__memory.buffer).set(p);var m=d.exports.hsv_v16||d.exports._hsv_v16;m(0,s,e,r),(m=d.exports.blurMono16||d.exports._blurMono16)(s,c,l,f,g,e,r,n),(m=d.exports.unsharp||d.exports._unsharp)(0,0,s,c,e,r,i,a),p.set(new Uint32Array(this.__memory.buffer,0,o))}}},{}],12:[function(t,e,r){"use strict";e.exports="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"},{}],13:[function(t,e,r){"use strict";function i(t,e){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=e||2e3}i.prototype.acquire=function(){var t,e=this;return 0!==this.available.length?t=this.available.pop():((t=this.create()).id=this.lastId++,t.release=function(){return e.release(t)}),this.acquired[t.id]=t,t},i.prototype.release=function(t){var e=this;delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout(function(){return e.gc()},100))},i.prototype.gc=function(){var t=this,e=Date.now();this.available=this.available.filter(function(r){return!(e-r.lastUsed>t.idle)||(r.destroy(),!1)}),0!==this.available.length?this.timeoutId=setTimeout(function(){return t.gc()},100):this.timeoutId=0},e.exports=i},{}],14:[function(t,e,r){"use strict";e.exports=function(t,e,r,i,n,a){var o=r/t,s=i/e,A=(2*a+2+1)/n;if(A>.5)return[[r,i]];var h=Math.ceil(Math.log(Math.min(o,s))/Math.log(A));if(h<=1)return[[r,i]];for(var u=[],c=0;c<h;c++){var l=Math.round(Math.pow(Math.pow(t,h-c-1)*Math.pow(r,c+1),1/h)),f=Math.round(Math.pow(Math.pow(e,h-c-1)*Math.pow(i,c+1),1/h));u.push([l,f])}return u}},{}],15:[function(t,e,r){"use strict";function i(t){var e=Math.round(t);return 1e-5>Math.abs(t-e)?e:Math.floor(t)}function n(t){var e=Math.round(t);return 1e-5>Math.abs(t-e)?e:Math.ceil(t)}e.exports=function(t){var e,r,a,o,s,A,h=t.toWidth/t.width,u=t.toHeight/t.height,c=i(t.srcTileSize*h)-2*t.destTileBorder,l=i(t.srcTileSize*u)-2*t.destTileBorder;if(c<1||l<1)throw Error("Internal error in pica: target tile width/height is too small.");var f=[];for(o=0;o<t.toHeight;o+=l)for(a=0;a<t.toWidth;a+=c)(e=a-t.destTileBorder)<0&&(e=0),s=a+c+t.destTileBorder-e,e+s>=t.toWidth&&(s=t.toWidth-e),(r=o-t.destTileBorder)<0&&(r=0),A=o+l+t.destTileBorder-r,r+A>=t.toHeight&&(A=t.toHeight-r),f.push({toX:e,toY:r,toWidth:s,toHeight:A,toInnerX:a,toInnerY:o,toInnerWidth:c,toInnerHeight:l,offsetX:e/h-i(e/h),offsetY:r/u-i(r/u),scaleX:h,scaleY:u,x:i(e/h),y:i(r/u),width:n(s/h),height:n(A/u)});return f}},{}],16:[function(t,e,r){"use strict";function i(t){return Object.prototype.toString.call(t)}e.exports.isCanvas=function(t){var e=i(t);return"[object HTMLCanvasElement]"===e||"[object OffscreenCanvas]"===e||"[object Canvas]"===e},e.exports.isImage=function(t){return"[object HTMLImageElement]"===i(t)},e.exports.isImageBitmap=function(t){return"[object ImageBitmap]"===i(t)},e.exports.limiter=function(t){var e=0,r=[];function i(){e<t&&r.length&&(e++,r.shift()())}return function(t){return new Promise(function(n,a){r.push(function(){t().then(function(t){n(t),e--,i()},function(t){a(t),e--,i()})}),i()})}},e.exports.cib_quality_name=function(t){switch(t){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},e.exports.cib_support=function(t){return Promise.resolve().then(function(){if("undefined"==typeof createImageBitmap)return!1;var e=t(100,100);return createImageBitmap(e,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(t){var r=10===t.width;return t.close(),e=null,r})}).catch(function(){return!1})},e.exports.worker_offscreen_canvas_support=function(){return new Promise(function(t,e){if("undefined"==typeof OffscreenCanvas){t(!1);return}var r=btoa("(".concat((function(t){if("undefined"==typeof createImageBitmap){t.postMessage(!1);return}Promise.resolve().then(function(){var t=new OffscreenCanvas(10,10);return t.getContext("2d").rect(0,0,1,1),createImageBitmap(t,0,0,1,1)}).then(function(){return t.postMessage(!0)},function(){return t.postMessage(!1)})}).toString(),")(self);")),i=new Worker("data:text/javascript;base64,".concat(r));i.onmessage=function(e){return t(e.data)},i.onerror=e}).then(function(t){return t},function(){return!1})},e.exports.can_use_canvas=function(t){var e=!1;try{var r=t(2,1).getContext("2d"),i=r.createImageData(2,1);i.data[0]=12,i.data[1]=23,i.data[2]=34,i.data[3]=255,i.data[4]=45,i.data[5]=56,i.data[6]=67,i.data[7]=255,r.putImageData(i,0,0),i=null,i=r.getImageData(0,0,2,1),12===i.data[0]&&23===i.data[1]&&34===i.data[2]&&255===i.data[3]&&45===i.data[4]&&56===i.data[5]&&67===i.data[6]&&255===i.data[7]&&(e=!0)}catch(t){}return e},e.exports.cib_can_use_region=function(){return new Promise(function(t){if("undefined"==typeof Image||"undefined"==typeof createImageBitmap){t(!1);return}var e=new Image;e.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",e.onload=function(){createImageBitmap(e,0,0,e.width,e.height).then(function(r){r.width===e.width&&r.height===e.height?t(!0):t(!1)},function(){return t(!1)})},e.onerror=function(){return t(!1)}})}},{}],17:[function(t,e,r){"use strict";e.exports=function(){var e,r=t("./mathlib");onmessage=function(t){var i=t.data.opts;if(!i.src&&i.srcBitmap){var n=new OffscreenCanvas(i.width,i.height),a=n.getContext("2d");a.drawImage(i.srcBitmap,0,0),i.src=a.getImageData(0,0,i.width,i.height).data,n.width=n.height=0,n=null,i.srcBitmap.close(),i.srcBitmap=null}e||(e=new r(t.data.features));var o=e.resizeAndUnsharp(i);postMessage({data:o},[o.buffer])}}},{"./mathlib":1}],18:[function(t,e,r){var i,n,a,o,s,A,h,u;function c(t,e,r,i,n,a){var o,s,A,h,u,c,l,f,g,d,p,m,I,v;for(g=0;g<a;g++){for(d=0,c=g*n,l=g,f=0,h=u=(o=t[c])*i[6],p=i[0],m=i[1],I=i[4],v=i[5];d<n;d++)A=(s=t[c])*p+o*m+h*I+u*v,u=h,h=A,o=s,r[f]=h,f++,c++;for(c--,f--,l+=a*(n-1),h=u=(o=t[c])*i[7],s=o,p=i[2],m=i[3],d=n-1;d>=0;d--)A=s*p+o*m+h*I+u*v,u=h,h=A,o=s,s=t[c],e[l]=r[f]+h,c--,f--,l-=a}}e.exports=function(t,e,r,l){if(l){var f,g,d,p,m,I=new Uint16Array(t.length),v=new Float32Array(Math.max(e,r)),b=((f=l)<.5&&(f=.5),d=Math.exp(-(g=Math.exp(.527076)/f)),p=Math.exp(-2*g),i=m=(1-d)*(1-d)/(1+2*g*d-p),n=m*(g-1)*d,a=m*(g+1)*d,o=-m*p,h=(i+n)/(1-(s=2*d)-(A=-p)),u=(a+o)/(1-s-A),new Float32Array([i,n,a,o,s,A,h,u]));c(t,I,v,b,e,r,l),c(I,t,v,b,r,e,l)}}},{}],19:[function(t,e,r){"use strict";var i=t("object-assign"),n=t("./lib/base64decode"),a=t("./lib/wa_detect"),o={js:!0,wasm:!0};function s(t){if(!(this instanceof s))return new s(t);var e=i({},o,t||{});if(this.options=e,this.__cache={},this.__init_promise=null,this.__modules=e.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=a,s.prototype.use=function(t){return this.__modules[t.name]=t,this.options.wasm&&this.has_wasm()&&t.wasm_fn?this[t.name]=t.wasm_fn:this[t.name]=t.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var t=this;return this.__init_promise=Promise.all(Object.keys(t.__modules).map(function(e){var r=t.__modules[e];return t.options.wasm&&t.has_wasm()&&r.wasm_fn&&!t.__wasm[e]?WebAssembly.compile(t.__base64decode(r.wasm_src)).then(function(r){t.__wasm[e]=r}):null})).then(function(){return t}),this.__init_promise},s.prototype.__base64decode=n,s.prototype.__reallocate=function(t){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(t/65536)}),this.__memory;var e=this.__memory.buffer.byteLength;return e<t&&this.__memory.grow(Math.ceil((t-e)/65536)),this.__memory},s.prototype.__instance=function(t,e,r){if(e&&this.__reallocate(e),!this.__wasm[t]){var n=this.__modules[t];this.__wasm[t]=new WebAssembly.Module(this.__base64decode(n.wasm_src))}if(!this.__cache[t]){var a={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[t]=new WebAssembly.Instance(this.__wasm[t],{env:i(a,r||{})})}return this.__cache[t]},s.prototype.__align=function(t,e){var r=t%(e=e||8);return t+(r?e-r:0)},e.exports=s},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(t,e,r){"use strict";e.exports=function(t){for(var e=t.replace(/[\r\n=]/g,""),r=e.length,i=new Uint8Array(3*r>>2),n=0,a=0,o=0;o<r;o++)o%4==0&&o&&(i[a++]=n>>16&255,i[a++]=n>>8&255,i[a++]=255&n),n=n<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(o));var s=r%4*6;return 0===s?(i[a++]=n>>16&255,i[a++]=n>>8&255,i[a++]=255&n):18===s?(i[a++]=n>>10&255,i[a++]=n>>2&255):12===s&&(i[a++]=n>>4&255),i}},{}],21:[function(t,e,r){"use strict";var i;e.exports=function(){if(void 0!==i||(i=!1,"undefined"==typeof WebAssembly))return i;try{var t=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),e=new WebAssembly.Module(t),r=new WebAssembly.Instance(e,{});0!==r.exports.test(4)&&(i=!0)}catch(t){}return i}},{}],22:[function(t,e,r){"use strict";var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=!function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var n={};if("abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},n)).join(""))return!1;return!0}catch(t){return!1}}()?function(t,e){for(var r,o,s=function(t){if(null==t)throw TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),A=1;A<arguments.length;A++){for(var h in r=Object(arguments[A]))n.call(r,h)&&(s[h]=r[h]);if(i){o=i(r);for(var u=0;u<o.length;u++)a.call(r,o[u])&&(s[o[u]]=r[o[u]])}}return s}:Object.assign},{}],23:[function(t,e,r){var i=arguments[3],n=arguments[4],a=arguments[5],o=JSON.stringify;e.exports=function(t,e){for(var r,s=Object.keys(a),A=0,h=s.length;A<h;A++){var u=s[A],c=a[u].exports;if(c===t||c&&c.default===t){r=u;break}}if(!r){r=Math.floor(4294967296*Math.random()).toString(16);for(var l={},A=0,h=s.length;A<h;A++){var u=s[A];l[u]=u}n[r]=["function(require,module,exports){"+t+"(self); }",l]}var f=Math.floor(4294967296*Math.random()).toString(16),g={};g[r]=r,n[f]=["function(require,module,exports){var f = require("+o(r)+");(f.default ? f.default : f)(self);}",g];var d={};!function t(e){for(var r in d[e]=!0,n[e][1]){var i=n[e][1][r];d[i]||t(i)}}(f);var p="("+i+")({"+Object.keys(d).map(function(t){return o(t)+":["+n[t][0]+","+o(n[t][1])+"]"}).join(",")+"},{},["+o(f)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,I=new Blob([p],{type:"text/javascript"});if(e&&e.bare)return I;var v=m.createObjectURL(I),b=new Worker(v);return b.objectURL=v,b}},{}],"/index.js":[function(t,e,r){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=Array(e);r<e;r++)i[r]=t[r];return i}var n=t("object-assign"),a=t("webworkify"),o=t("./lib/mathlib"),s=t("./lib/pool"),A=t("./lib/utils"),h=t("./lib/worker"),u=t("./lib/stepper"),c=t("./lib/tiler"),l=t("./lib/mm_resize/resize_filter_info"),f={},g=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(g=navigator.userAgent.indexOf("Safari")>=0)}catch(t){}var d=1;"undefined"!=typeof navigator&&(d=Math.min(navigator.hardwareConcurrency||1,4));var p={tile:1024,concurrency:d,features:["js","wasm","ww"],idle:2e3,createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r}},m={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},I=!1,v=!1,b=!1,w=!1,y=!1;function B(){return{value:a(h),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}}function E(t){if(!(this instanceof E))return new E(t);this.options=n({},p,t||{});var e="lk_".concat(this.options.concurrency);this.__limit=f[e]||A.limiter(this.options.concurrency),f[e]||(f[e]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}E.prototype.init=function(){var e,r,i=this;if(this.__initPromise)return this.__initPromise;if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{new ImageData(new Uint8ClampedArray(400),10,10),I=!0}catch(t){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?v=!0:this.debug("ImageBitmap does not support .close(), disabled"));var a=this.options.features.slice();if(a.indexOf("all")>=0&&(a=["cib","wasm","js","ww"]),this.__requested_features=a,this.__mathlib=new o(a),a.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{t("webworkify")(function(){}).terminate(),this.features.ww=!0;var h="wp_".concat(JSON.stringify(this.options));f[h]?this.__workersPool=f[h]:(this.__workersPool=new s(B,this.options.idle),f[h]=this.__workersPool)}catch(t){}var u=this.__mathlib.init().then(function(t){n(i.features,t.features)});e=v?A.cib_support(this.options.createCanvas).then(function(t){if(i.features.cib&&0>a.indexOf("cib")){i.debug("createImageBitmap() resize supported, but disabled by config");return}a.indexOf("cib")>=0&&(i.features.cib=t)}):Promise.resolve(!1),b=A.can_use_canvas(this.options.createCanvas),r=(r=v&&I&&-1!==a.indexOf("ww")?A.worker_offscreen_canvas_support():Promise.resolve(!1)).then(function(t){w=t});var c=A.cib_can_use_region().then(function(t){y=t});return this.__initPromise=Promise.all([u,e,r,c]).then(function(){return i}),this.__initPromise},E.prototype.__invokeResize=function(t,e){var r=this;return e.__mathCache=e.__mathCache||{},Promise.resolve().then(function(){return r.features.ww?new Promise(function(i,n){var a=r.__workersPool.acquire();e.cancelToken&&e.cancelToken.catch(function(t){return n(t)}),a.value.onmessage=function(t){a.release(),t.data.err?n(t.data.err):i(t.data)};var o=[];t.src&&o.push(t.src.buffer),t.srcBitmap&&o.push(t.srcBitmap),a.value.postMessage({opts:t,features:r.__requested_features,preload:{wasm_nodule:r.__mathlib.__}},o)}):{data:r.__mathlib.resizeAndUnsharp(t,e.__mathCache)}})},E.prototype.__extractTileData=function(t,e,r,i,n){if(this.features.ww&&w&&(A.isCanvas(e)||y))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(i.srcImageBitmap||e,t.x,t.y,t.width,t.height).then(function(t){return n.srcBitmap=t,n});if(A.isCanvas(e))return i.srcCtx||(i.srcCtx=e.getContext("2d")),this.debug("Get tile pixel data"),n.src=i.srcCtx.getImageData(t.x,t.y,t.width,t.height).data,n;this.debug("Draw tile imageBitmap/image to temporary canvas");var a=this.options.createCanvas(t.width,t.height),o=a.getContext("2d");return o.globalCompositeOperation="copy",o.drawImage(i.srcImageBitmap||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),this.debug("Get tile pixel data"),n.src=o.getImageData(0,0,t.width,t.height).data,a.width=a.height=0,n},E.prototype.__landTileData=function(t,e,r){var i;if(this.debug("Convert raw rgba tile result to ImageData"),e.bitmap)return r.toCtx.drawImage(e.bitmap,t.toX,t.toY),null;if(I)i=new ImageData(new Uint8ClampedArray(e.data),t.toWidth,t.toHeight);else if((i=r.toCtx.createImageData(t.toWidth,t.toHeight)).data.set)i.data.set(e.data);else for(var n=i.data.length-1;n>=0;n--)i.data[n]=e.data[n];return this.debug("Draw tile"),g?r.toCtx.putImageData(i,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):r.toCtx.putImageData(i,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null},E.prototype.__tileAndResize=function(t,e,r){var i=this,n={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null};return Promise.resolve().then(function(){if(n.toCtx=e.getContext("2d"),A.isCanvas(t))return null;if(A.isImageBitmap(t))return n.srcImageBitmap=t,n.isImageBitmapReused=!0,null;if(A.isImage(t))return v?(i.debug("Decode image via createImageBitmap"),createImageBitmap(t).then(function(t){n.srcImageBitmap=t}).catch(function(t){return null})):null;throw Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(r.canceled)return r.cancelToken;i.debug("Calculate tiles");var a=c({width:r.width,height:r.height,srcTileSize:i.options.tile,toWidth:r.toWidth,toHeight:r.toHeight,destTileBorder:r.__destTileBorder}).map(function(e){return i.__limit(function(){if(r.canceled)return r.cancelToken;var a={width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,filter:r.filter,unsharpAmount:r.unsharpAmount,unsharpRadius:r.unsharpRadius,unsharpThreshold:r.unsharpThreshold};return i.debug("Invoke resize math"),Promise.resolve(a).then(function(a){return i.__extractTileData(e,t,r,n,a)}).then(function(t){return i.debug("Invoke resize math"),i.__invokeResize(t,r)}).then(function(t){return r.canceled?r.cancelToken:(n.srcImageData=null,i.__landTileData(e,t,n))})})});function o(t){t.srcImageBitmap&&(t.isImageBitmapReused||t.srcImageBitmap.close(),t.srcImageBitmap=null)}return i.debug("Process tiles"),Promise.all(a).then(function(){return i.debug("Finished!"),o(n),e},function(t){throw o(n),t})})},E.prototype.__processStages=function(t,e,r,a){var o,s,A,h=this;if(a.canceled)return a.cancelToken;var u=function(t){if(Array.isArray(t))return t}(o=t.shift())||function(t,e){var r,i,n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(o,2)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}}(o,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=u[0],f=u[1],g=0===t.length;return s=g||0>l.q2f.indexOf(a.filter)?a.filter:"box"===a.filter?"box":"hamming",a=n({},a,{toWidth:c,toHeight:f,filter:s}),g||(A=this.options.createCanvas(c,f)),this.__tileAndResize(e,g?r:A,a).then(function(){return g?r:(a.width=c,a.height=f,h.__processStages(t,A,r,a))}).then(function(t){return A&&(A.width=A.height=0),t})},E.prototype.__resizeViaCreateImageBitmap=function(t,e,r){var i=this,n=e.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(t,{resizeWidth:r.toWidth,resizeHeight:r.toHeight,resizeQuality:A.cib_quality_name(l.f2q[r.filter])}).then(function(t){if(r.canceled)return r.cancelToken;if(!r.unsharpAmount)return n.drawImage(t,0,0),t.close(),n=null,i.debug("Finished!"),e;i.debug("Unsharp result");var a=i.options.createCanvas(r.toWidth,r.toHeight),o=a.getContext("2d");o.drawImage(t,0,0),t.close();var s=o.getImageData(0,0,r.toWidth,r.toHeight);return i.__mathlib.unsharp_mask(s.data,r.toWidth,r.toHeight,r.unsharpAmount,r.unsharpRadius,r.unsharpThreshold),n.putImageData(s,0,0),a.width=a.height=0,s=o=a=n=null,i.debug("Finished!"),e})},E.prototype.resize=function(t,e,r){var i=this;this.debug("Start resize...");var a=n({},m);if(isNaN(r)?r&&(a=n(a,r)):a=n(a,{quality:r}),a.toWidth=e.width,a.toHeight=e.height,a.width=t.naturalWidth||t.width,a.height=t.naturalHeight||t.height,Object.prototype.hasOwnProperty.call(a,"quality")){if(a.quality<0||a.quality>3)throw Error("Pica: .quality should be [0..3], got ".concat(a.quality));a.filter=l.q2f[a.quality]}return 0===e.width||0===e.height?Promise.reject(Error("Invalid output size: ".concat(e.width,"x").concat(e.height))):(a.unsharpRadius>2&&(a.unsharpRadius=2),a.canceled=!1,a.cancelToken&&(a.cancelToken=a.cancelToken.then(function(t){throw a.canceled=!0,t},function(t){throw a.canceled=!0,t})),a.__destTileBorder=Math.ceil(Math.max(3,2.5*a.unsharpRadius|0)),this.init().then(function(){if(a.canceled)return a.cancelToken;if(i.features.cib){if(l.q2f.indexOf(a.filter)>=0)return i.__resizeViaCreateImageBitmap(t,e,a);i.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!b){var r=Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw r.code="ERR_GET_IMAGE_DATA",r}var n=u(a.width,a.height,a.toWidth,a.toHeight,i.options.tile,a.__destTileBorder);return i.__processStages(n,t,e,a)}))},E.prototype.resizeBuffer=function(t){var e=this,r=n({},m,t);if(Object.prototype.hasOwnProperty.call(r,"quality")){if(r.quality<0||r.quality>3)throw Error("Pica: .quality should be [0..3], got ".concat(r.quality));r.filter=l.q2f[r.quality]}return this.init().then(function(){return e.__mathlib.resizeAndUnsharp(r)})},E.prototype.toBlob=function(t,e,r){return e=e||"image/png",new Promise(function(i){if(t.toBlob){t.toBlob(function(t){return i(t)},e,r);return}if(t.convertToBlob){i(t.convertToBlob({type:e,quality:r}));return}for(var n=atob(t.toDataURL(e,r).split(",")[1]),a=n.length,o=new Uint8Array(a),s=0;s<a;s++)o[s]=n.charCodeAt(s);i(new Blob([o],{type:e}))})},E.prototype.debug=function(){},e.exports=E},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")},92703:function(t,e,r){"use strict";var i=r(50414);function n(){}function a(){}a.resetWarningCache=n,t.exports=function(){function t(t,e,r,n,a,o){if(o!==i){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:n};return r.PropTypes=r,r}},45697:function(t,e,r){t.exports=r(92703)()},50414:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},27011:function(t,e,r){t.exports=function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(t),n=r(e);function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function A(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach(function(e){o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}}(t,e)||g(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=Array(e);r<e;r++)i[r]=t[r];return i}function p(t,e){return new Promise(function(r,i){var n=new Image;n.onload=function(){return r(n)},n.onerror=i,!1==(null!==t&&!!t.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&e&&(n.crossOrigin=e),n.src=t})}var m,I=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),v="undefined"!=typeof File,b={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},w=I?b.touch:b.desktop,y="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,B={x:.5,y:.5},E=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(A,n.default.Component);var t,e,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}(),function(){var e,r,i=u(A);return r=t?(e=u(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r&&("object"==typeof r||"function"==typeof r)?r:l(this)});function A(t){var e;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,A),o(l(e=i.call(this,t)),"state",{drag:!1,my:null,mx:null,image:B}),o(l(e),"handleImageReady",function(t){var r=e.getInitialSize(t.width,t.height);r.resource=t,r.x=.5,r.y=.5,r.backgroundColor=e.props.backgroundColor,e.setState({drag:!1,image:r},e.props.onImageReady),e.props.onLoadSuccess(r)}),o(l(e),"clearImage",function(){e.canvas.getContext("2d").clearRect(0,0,e.canvas.width,e.canvas.height),e.setState({image:B})}),o(l(e),"handleMouseDown",function(t){(t=t||window.event).preventDefault(),e.setState({drag:!0,mx:null,my:null})}),o(l(e),"handleMouseUp",function(){e.state.drag&&(e.setState({drag:!1}),e.props.onMouseUp())}),o(l(e),"handleMouseMove",function(t){var r,i,n,a,o,s,A,u,c,l,f,g,d,p,m,I;t=t||window.event,!1!==e.state.drag&&(t.preventDefault(),n={mx:r=t.targetTouches?t.targetTouches[0].pageX:t.clientX,my:i=t.targetTouches?t.targetTouches[0].pageY:t.clientY},I=(I=e.props.rotate%360)<0?I+360:I,e.state.mx&&e.state.my&&(a=e.state.mx-r,o=e.state.my-i,s=e.state.image.width*e.props.scale,A=e.state.image.height*e.props.scale,c=(u=e.getCroppingRect()).x,l=u.y,c*=s,l*=A,g=Math.cos((f=function(t){return t*(Math.PI/180)})(I)),p=l+-a*(d=Math.sin(f(I)))+o*g,m={x:(c+a*g+o*d)/s+1/e.props.scale*e.getXScale()/2,y:p/A+1/e.props.scale*e.getYScale()/2},e.props.onPositionChange(m),n.image=h(h({},e.state.image),m)),e.setState(n),e.props.onMouseMove(t))}),o(l(e),"setCanvas",function(t){e.canvas=t}),e.canvas=null,e}return e=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(y=1);var t,e,r=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(r),document&&(t=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){t=!1}return t}()&&{passive:!1},e=w.native,document.addEventListener(e.move,this.handleMouseMove,t),document.addEventListener(e.up,this.handleMouseUp,t),I&&(document.addEventListener(e.mouseMove,this.handleMouseMove,t),document.addEventListener(e.mouseUp,this.handleMouseUp,t)))}},{key:"componentDidUpdate",value:function(t,e){this.props.image&&this.props.image!==t.image||this.props.width!==t.width||this.props.height!==t.height||this.props.backgroundColor!==t.backgroundColor?this.loadImage(this.props.image):this.props.image||e.image===B||this.clearImage();var r=this.canvas.getContext("2d");r.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(r),this.paintImage(r,this.state.image,this.props.border),t.image===this.props.image&&t.width===this.props.width&&t.height===this.props.height&&t.position===this.props.position&&t.scale===this.props.scale&&t.rotate===this.props.rotate&&e.my===this.state.my&&e.mx===this.state.mx&&e.image.x===this.state.image.x&&e.image.y===this.state.image.y&&e.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var t;document&&(t=w.native,document.removeEventListener(t.move,this.handleMouseMove,!1),document.removeEventListener(t.up,this.handleMouseUp,!1),I&&(document.removeEventListener(t.mouseMove,this.handleMouseMove,!1),document.removeEventListener(t.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var t=this.props,e=t.width,r=t.height,i=t.rotate,n=t.border,a={},o=f(this.getBorders(n),2),s=o[0],A=o[1];return this.isVertical()?(a.width=r,a.height=e):(a.width=e,a.height=r),a.width+=2*s,a.height+=2*A,{canvas:a,rotate:i,width:e,height:r,border:n}}},{key:"getImage",value:function(){var t=this.getCroppingRect(),e=this.state.image;t.x*=e.resource.width,t.y*=e.resource.height,t.width*=e.resource.width,t.height*=e.resource.height;var r=document.createElement("canvas");this.isVertical()?(r.width=t.height,r.height=t.width):(r.width=t.width,r.height=t.height);var i=r.getContext("2d");return i.translate(r.width/2,r.height/2),i.rotate(this.props.rotate*Math.PI/180),i.translate(-r.width/2,-r.height/2),this.isVertical()&&i.translate((r.width-r.height)/2,(r.height-r.width)/2),e.backgroundColor&&(i.fillStyle=e.backgroundColor,i.fillRect(-t.x,-t.y,e.resource.width,e.resource.height)),i.drawImage(e.resource,-t.x,-t.y),r}},{key:"getImageScaledToCanvas",value:function(){var t=this.getDimensions(),e=t.width,r=t.height,i=document.createElement("canvas");return this.isVertical()?(i.width=r,i.height=e):(i.width=e,i.height=r),this.paintImage(i.getContext("2d"),this.state.image,0,1),i}},{key:"getXScale",value:function(){return Math.min(1,this.props.width/this.props.height/(this.state.image.width/this.state.image.height))}},{key:"getYScale",value:function(){return Math.min(1,this.props.height/this.props.width/(this.state.image.height/this.state.image.width))}},{key:"getCroppingRect",value:function(){var t=this.props.position||{x:this.state.image.x,y:this.state.image.y},e=1/this.props.scale*this.getXScale(),r=1/this.props.scale*this.getYScale(),i={x:t.x-e/2,y:t.y-r/2,width:e,height:r},n=0,a=1-i.width,o=0,s=1-i.height;return(this.props.disableBoundaryChecks||1<e||1<r)&&(n=-i.width,o=-i.height,s=a=1),h(h({},i),{},{x:Math.max(n,Math.min(i.x,a)),y:Math.max(o,Math.min(i.y,s))})}},{key:"loadImage",value:function(t){v&&t instanceof File?this.loadingImage=new Promise(function(e,r){var i=new FileReader;i.onload=function(t){try{var i=p(t.target.result);e(i)}catch(t){r(t)}},i.readAsDataURL(t)}).then(this.handleImageReady).catch(this.props.onLoadFailure):"string"==typeof t&&(this.loadingImage=p(t,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(t,e){var r,i,n=this.getDimensions();return e/t<n.height/n.width?i=t*((r=this.getDimensions().height)/e):r=e*((i=this.getDimensions().width)/t),{height:r,width:i}}},{key:"paintImage",value:function(t,e,r,i){var n,a=3<arguments.length&&void 0!==i?i:y;e.resource&&(n=this.calculatePosition(e,r),t.save(),t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(this.props.rotate*Math.PI/180),t.translate(-t.canvas.width/2,-t.canvas.height/2),this.isVertical()&&t.translate((t.canvas.width-t.canvas.height)/2,(t.canvas.height-t.canvas.width)/2),t.scale(a,a),t.globalCompositeOperation="destination-over",t.drawImage(e.resource,n.x,n.y,n.width,n.height),e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.fillRect(n.x,n.y,n.width,n.height)),t.restore())}},{key:"calculatePosition",value:function(t,e){t=t||this.state.image;var r=f(this.getBorders(e),2),i=r[0],n=r[1],a=this.getCroppingRect(),o=t.width*this.props.scale,s=t.height*this.props.scale,A=-a.x*o,h=-a.y*s;return this.isVertical()?(A+=n,h+=i):(A+=i,h+=n),{x:A,y:h,height:s,width:o}}},{key:"paint",value:function(t){t.save(),t.scale(y,y),t.translate(0,0),t.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var e,r,i,n,a,o=this.props.borderRadius,s=this.getDimensions(),A=f(this.getBorders(s.border),2),h=A[0],u=A[1],c=s.canvas.height,l=s.canvas.width,o=Math.max(o,0);o=Math.min(o,l/2-h,c/2-u),t.beginPath(),e=l-2*h,r=c-2*u,0===(i=o)?t.rect(h,u,e,r):(n=e-i,a=r-i,t.translate(h,u),t.arc(i,i,i,Math.PI,1.5*Math.PI),t.lineTo(n,0),t.arc(n,i,i,1.5*Math.PI,2*Math.PI),t.lineTo(e,a),t.arc(n,a,i,2*Math.PI,.5*Math.PI),t.lineTo(i,r),t.arc(i,a,i,.5*Math.PI,Math.PI),t.translate(-h,-u)),t.rect(l,0,-l,c),t.fill("evenodd"),t.restore()}},{key:"render",value:function(){var t=this.props,e=(t.scale,t.rotate,t.image,t.border,t.borderRadius,t.width,t.height,t.position,t.color,t.backgroundColor,t.style),r=(t.crossOrigin,t.onLoadFailure,t.onLoadSuccess,t.onImageReady,t.onImageChange,t.onMouseUp,t.onMouseMove,t.onPositionChange,t.disableBoundaryChecks,t.disableHiDPIScaling,t.disableCanvasRotation,function(t,e){if(null==t)return{};var r,i=function(t,e){if(null==t)return{};for(var r,i={},n=Object.keys(t),a=0;a<n.length;a++)r=n[a],0<=e.indexOf(r)||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(t),a=0;a<n.length;a++)r=n[a],0<=e.indexOf(r)||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r]);return i}(t,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),i=this.getDimensions(),a={width:i.canvas.width,height:i.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},o={width:i.canvas.width*y,height:i.canvas.height*y,style:h(h({},a),e)};return o[w.react.down]=this.handleMouseDown,I&&(o[w.react.mouseDown]=this.handleMouseDown),n.default.createElement("canvas",s({ref:this.setCanvas},o,r))}}],a(A.prototype,e),r&&a(A,r),A}();return o(E,"propTypes",{scale:i.default.number,rotate:i.default.number,image:i.default.oneOfType([i.default.string].concat(function(t){if(Array.isArray(t))return d(t)}(m=v?[i.default.instanceOf(File)]:[])||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(m)||g(m)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:i.default.oneOfType([i.default.number,i.default.arrayOf(i.default.number)]),borderRadius:i.default.number,width:i.default.number,height:i.default.number,position:i.default.shape({x:i.default.number,y:i.default.number}),color:i.default.arrayOf(i.default.number),backgroundColor:i.default.string,crossOrigin:i.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:i.default.func,onLoadSuccess:i.default.func,onImageReady:i.default.func,onImageChange:i.default.func,onMouseUp:i.default.func,onMouseMove:i.default.func,onPositionChange:i.default.func,disableBoundaryChecks:i.default.bool,disableHiDPIScaling:i.default.bool,disableCanvasRotation:i.default.bool}),o(E,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),E}(r(45697),r(67294))}}]);